<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudySpace - 邮箱验证码登录</title>
  <link rel="stylesheet" href="admin-desktop/core/styles/main.css">
  <style>
    :root {
      --auth-bg: radial-gradient(circle at 18% 22%, rgba(0, 122, 255, 0.12), transparent 34%), radial-gradient(circle at 78% 18%, rgba(90, 200, 250, 0.12), transparent 36%), radial-gradient(circle at 50% 82%, rgba(0, 122, 255, 0.08), transparent 38%), linear-gradient(180deg, #F2F3F7 0%, #E7E9F2 100%);
    }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: var(--font-family-primary);
      background: var(--auth-bg);
      color: var(--color-text-primary);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: calc(var(--spacing-xl) + 12px) var(--spacing-lg) var(--spacing-lg);
      gap: var(--spacing-lg);
    }
    .brand-bar { width: min(900px, 100%); display: flex; align-items: center; justify-content: space-between; gap: var(--spacing-lg); background: rgba(255, 255, 255, 0.9); border: 1px solid var(--color-border-secondary); border-radius: var(--radius-xl); padding: calc(var(--spacing-md) - 4px) var(--spacing-xl); box-shadow: var(--shadow-md); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); }
    .brand-logo { width: 46px; height: 46px; border-radius: 50%; background: var(--color-primary-gradient); display: grid; place-items: center; color: #fff; font-weight: var(--font-weight-bold); letter-spacing: 0.02em; box-shadow: var(--shadow-lg); }
    .brand-title { display: flex; flex-direction: column; gap: 2px; }
    .brand-title strong { font-size: 18px; letter-spacing: var(--letter-spacing-tight); }
    .brand-title span { color: var(--color-text-secondary); font-size: 14px; }
    .brand-left { display: flex; align-items: center; gap: var(--spacing-md); }
    .auth-grid { width: min(900px, 100%); display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-md); align-items: stretch; }
    .login-panel { background: var(--glass-bg-dark); border: 1px solid var(--color-border-secondary); border-radius: var(--radius-xxl); padding: var(--spacing-xxl); padding-block: calc(var(--spacing-xxl) + 8px); box-shadow: var(--shadow-xl); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); display: grid; gap: var(--spacing-lg); }
    .login-panel h2 { margin: 0; text-align: center; font-size: 26px; letter-spacing: var(--letter-spacing-tight); }
    .form-grid { display: grid; gap: var(--spacing-md); max-width: 640px; margin: 0 auto; width: 100%; }
    .form-row { display: grid; grid-template-columns: 140px 1fr; align-items: center; gap: var(--spacing-md); justify-items: center; }
    .form-row label { font-size: 18px; color: var(--color-text-primary); font-weight: var(--font-weight-medium); text-align: right; }
    .input { width: 100%; padding: 18px 16px; border-radius: var(--radius-lg); border: 1px solid var(--color-border-secondary); background: rgba(255, 255, 255, 0.92); font-size: 15px; transition: border-color var(--transition-normal), box-shadow var(--transition-normal); }
    .input:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.18); }
    .captcha-field { display: flex; align-items: center; gap: var(--spacing-sm); width: 100%; }
    .captcha-field .input { flex: 1; }
    .btn-ghost { border: 1px solid var(--color-border-secondary); background: rgba(255, 255, 255, 0.9); border-radius: var(--radius-md); padding: 14px 16px; font-size: 14px; cursor: pointer; transition: transform var(--transition-bounce), box-shadow var(--transition-normal), border-color var(--transition-normal); }
    .btn-ghost:hover { transform: translateY(-1px); border-color: var(--color-primary); box-shadow: var(--shadow-sm); }
    .btn-primary { border: none; background: var(--color-primary-gradient); color: #fff; padding: 14px 32px; border-radius: var(--radius-lg); font-size: 16px; font-weight: var(--font-weight-semibold); cursor: pointer; box-shadow: var(--shadow-button); transition: transform var(--transition-bounce), box-shadow var(--transition-normal); }
    .btn-primary:hover { transform: translateY(-1px); box-shadow: var(--shadow-card-hover); }
    .form-message { border-radius: var(--radius-lg); padding: var(--spacing-sm) var(--spacing-md); font-size: 14px; display: none; align-items: center; gap: var(--spacing-sm); justify-content: center; grid-column: 1 / -1; }
    .form-message--error { display: flex; background: var(--color-error-bg); color: var(--color-error); border: 1px solid rgba(255, 59, 48, 0.2); }
    .form-message--success { display: flex; background: var(--color-success-bg); color: var(--color-success); border: 1px solid rgba(52, 199, 89, 0.2); }
    .side-links { background: rgba(255, 255, 255, 0.9); border: 1px solid var(--color-border-secondary); border-radius: var(--radius-xxl); padding: var(--spacing-lg); padding-block: calc(var(--spacing-lg) + 12px); box-shadow: var(--shadow-lg); display: grid; gap: var(--spacing-sm); backdrop-filter: var(--glass-blur); -webkit-backdrop-filter: var(--glass-blur); }
    .side-links h3 { margin: var(--spacing-lg) 0 var(--spacing-sm); font-size: 18px; letter-spacing: var(--letter-spacing-tight); text-align: center; }
    .link-block { border: 1px solid var(--color-border-secondary); border-radius: var(--radius-lg); background: rgba(245, 245, 247, 0.85); padding: 12px 14px; display: flex; justify-content: space-between; align-items: center; gap: var(--spacing-sm); text-decoration: none; color: inherit; transition: transform var(--transition-bounce), box-shadow var(--transition-normal), border-color var(--transition-normal), background var(--transition-normal); }
    .link-block:hover { transform: translateY(-1px); border-color: var(--color-primary); background: rgba(245, 245, 247, 1); box-shadow: var(--shadow-md); }
    .link-content { display: flex; align-items: center; gap: var(--spacing-sm); }
    .link-content .icon { width: 36px; height: 36px; border-radius: var(--radius-md); display: grid; place-items: center; background: var(--color-primary-bg); color: var(--color-primary); font-size: 18px; }
    .link-content .text strong { display: block; font-weight: var(--font-weight-semibold); color: var(--color-text-primary); }
    .link-content .text small { display: block; color: var(--color-text-secondary); font-size: 12px; margin-top: 2px; }
    .link-block .arrow { font-weight: var(--font-weight-semibold); color: var(--color-text-secondary); }
    @media (max-width: 1024px) { body { padding: var(--spacing-lg); } .auth-grid { grid-template-columns: 1fr; } .side-links { order: -1; } }
    @media (max-width: 768px) { .form-row { grid-template-columns: 1fr; } .form-row label { text-align: left; } }
  </style>
</head>
<body>
  <header class="brand-bar">
    <div class="brand-left">
      <div class="brand-logo">SS</div>
      <div class="brand-title">
        <strong>StudySpace 邮箱验证码登录</strong>
        <span>收取验证码，快速进入主界面</span>
      </div>
    </div>
    <button class="btn-ghost" type="button" onclick="window.location.href='桌面端-登录.html'">返回账号密码登录</button>
  </header>

  <main class="auth-grid">
    <section class="login-panel" aria-label="邮箱验证码登录">
      <h2>邮箱登录</h2>
      <form class="form-grid" id="emailForm">
        <div class="form-row">
          <label for="email">邮箱账号</label>
          <input id="email" class="input" type="email" name="email" placeholder="请输入企业邮箱" required>
        </div>
        <div class="form-row">
          <label for="code">验证码</label>
          <div class="captcha-field">
            <input id="code" class="input" type="text" name="code" placeholder="输入6位验证码" autocomplete="one-time-code" required>
            <button class="btn-ghost" type="button" id="sendCodeBtn">发送验证码</button>
          </div>
        </div>
        <div class="form-row form-message" id="formMessage" aria-live="polite"></div>
        <div class="form-row full" style="justify-content:center;">
          <button class="btn-primary" type="submit" id="loginBtn">登录</button>
        </div>
      </form>
    </section>

    <aside class="side-links" aria-label="帮助中心">
      <h3>提示</h3>
      <a href="桌面端其他登录-微信登录.html" class="link-block">
        <div class="link-content">
          <span class="icon">📷</span>
          <div class="text">
            <strong>企业微信扫码</strong>
            <small>切换到企业微信扫码登录</small>
          </div>
        </div>
        <span class="arrow">→</span>
      </a>
      <a href="桌面端-用户端-任务.html" class="link-block">
        <div class="link-content">
          <span class="icon">🏠</span>
          <div class="text">
            <strong>直接进入首页</strong>
            <small>访客体验快速进入</small>
          </div>
        </div>
        <span class="arrow">→</span>
      </a>
    </aside>
  </main>

  <script>
    const form = document.querySelector('#emailForm');
    const formMessage = document.querySelector('#formMessage');
    const loginBtn = document.querySelector('#loginBtn');
    const sendCodeBtn = document.querySelector('#sendCodeBtn');
    const routes = { main: '桌面端-用户端-任务.html' };

    const showMessage = (text, type = 'error') => {
      formMessage.textContent = text;
      formMessage.classList.remove('form-message--error', 'form-message--success');
      formMessage.classList.add(type === 'success' ? 'form-message--success' : 'form-message--error');
      formMessage.style.display = 'flex';
    };

    const clearMessage = () => {
      formMessage.textContent = '';
      formMessage.classList.remove('form-message--error', 'form-message--success');
      formMessage.style.display = 'none';
    };

    sendCodeBtn?.addEventListener('click', () => {
      const email = document.querySelector('#email').value.trim();
      if (!email) {
        showMessage('请先填写邮箱账号');
        return;
      }
      let countdown = 60;
      sendCodeBtn.disabled = true;
      sendCodeBtn.textContent = `重新发送(${countdown}s)`;
      const timer = setInterval(() => {
        countdown -= 1;
        sendCodeBtn.textContent = countdown > 0 ? `重新发送(${countdown}s)` : '发送验证码';
        if (countdown <= 0) {
          clearInterval(timer);
          sendCodeBtn.disabled = false;
        }
      }, 1000);
      showMessage('验证码已发送至邮箱', 'success');
    });

    form?.addEventListener('submit', (e) => {
      e.preventDefault();
      clearMessage();
      const email = document.querySelector('#email').value.trim();
      const code = document.querySelector('#code').value.trim();
      if (!email || !code) {
        showMessage('邮箱和验证码不能为空');
        return;
      }
      loginBtn.disabled = true;
      loginBtn.textContent = '登录中...';
      setTimeout(() => {
        if (code.length === 6) {
          showMessage('登录成功，正在进入主界面...', 'success');
          setTimeout(() => { window.location.href = routes.main; }, 500);
        } else {
          showMessage('验证码不正确，请重试');
        }
        loginBtn.disabled = false;
        loginBtn.textContent = '登录';
      }, 600);
    });
  </script>
</body>
</html>
