<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StudySpace - 个人设置</title>
  <style>
    :root{
      --primary:#2d81ff;
      --primary-light:#f0f7ff;
      --primary-dark:#1a6ee0;

      --success:#4cd964;
      --danger:#ff3b30;
      --warning:#ff9500;

      --text-main:#1d1d1f;
      --text-secondary:#6e6e73;
      --text-tertiary:#8e8e93;

      --border:#e5e5e7;
      --border-light:#f2f2f7;

      --bg-light:#f5f5f7;
      --bg-white:#fff;
      --bg-sidebar:#f8f9fa;

      --radius-sm:6px;
      --radius-md:12px;
      --radius-lg:16px;

      --shadow-sm:0 2px 8px rgba(0,0,0,0.06);
      --shadow-lg:0 8px 24px rgba(0,0,0,0.12);
    }

    *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;}
    html,body{width:100%;height:100%;overflow:auto;}

    body{
      min-height:100vh;
      background:linear-gradient(135deg,#f5f7fa 0%,#e4e7ec 100%);
      color:var(--text-main);
      display:flex;
    }

    .app-container{display:flex;width:100%;min-height:100vh;}

    /* sidebar */
    .sidebar{
      width:240px;height:100%;
      background:var(--bg-sidebar);
      border-right:1px solid var(--border);
      display:flex;flex-direction:column;
      flex-shrink:0;overflow:hidden;
    }
    .sidebar__header{padding:24px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px;}
    .sidebar__logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--primary),#4d9eff);display:flex;align-items:center;justify-content:center;color:#fff;font-size:18px;font-weight:800;}
    .sidebar__title{font-size:18px;font-weight:800;letter-spacing:-0.5px;}
    .sidebar__nav{padding:24px 0;flex:1;display:flex;flex-direction:column;gap:4px;}
    .sidebar__nav-item{display:flex;align-items:center;padding:14px 20px;text-decoration:none;color:var(--text-secondary);transition:all .2s;font-size:15px;font-weight:600;border-left:3px solid transparent;}
    .sidebar__nav-item:hover{background:var(--bg-light);color:var(--text-main);}
    .sidebar__nav-item.active{background:var(--primary-light);color:var(--primary);border-left-color:var(--primary);font-weight:800;}
    .sidebar__footer{padding:20px;border-top:1px solid var(--border);display:flex;align-items:center;gap:12px;}
    .sidebar__avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--primary),#4d9eff);display:flex;align-items:center;justify-content:center;color:#fff;font-size:14px;font-weight:800;flex-shrink:0;}
    .sidebar__user-name{font-size:14px;font-weight:800;color:var(--text-main);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .sidebar__user-id{font-size:12px;color:var(--text-tertiary);}

    /* main */

    .main-content{flex:1;display:flex;flex-direction:column;overflow:auto;padding:24px;gap:24px;min-width:0;}

    .page-header{background:var(--bg-white);border-radius:var(--radius-lg);padding:20px 24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);}
    .page-header__top{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:12px;flex-wrap:wrap;}
    .page-title{display:flex;align-items:center;gap:10px;font-size:20px;font-weight:900;letter-spacing:-0.4px;}
    .page-title .dot{width:10px;height:10px;border-radius:50%;background:var(--primary);box-shadow:0 0 0 6px rgba(45,129,255,0.12);}
    .page-desc{color:var(--text-secondary);font-weight:600;}
    .header-actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end;}
    .btn{height:42px;padding:0 14px;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg-white);color:var(--text-main);font-size:14px;font-weight:800;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:8px;}
    .btn:hover{background:var(--bg-light);border-color:rgba(45,129,255,0.35);}
    .btn-primary{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;border-color:transparent;box-shadow:0 10px 28px rgba(45,129,255,0.18);}
    .btn-primary:hover{transform:translateY(-1px);}

    .settings-grid{display:grid;grid-template-columns:2fr 1fr;gap:20px;align-items:start;}
    .settings-card{background:var(--bg-white);border:1px solid var(--border);border-radius:var(--radius-lg);padding:20px;box-shadow:var(--shadow-sm);}
    .settings-card h3{font-size:17px;margin-bottom:12px;display:flex;align-items:center;gap:8px;}
    .settings-card p.desc{color:var(--text-secondary);margin-bottom:16px;}
    .field-group{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;}
    .field{display:flex;flex-direction:column;gap:6px;}
    .field label{font-weight:700;color:var(--text-secondary);}
    .field input,.field select,.field textarea{border:1px solid var(--border);border-radius:var(--radius-md);padding:12px;font-size:14px;font-weight:700;background:var(--bg-light);color:var(--text-main);}
    .field textarea{resize:vertical;min-height:90px;}
    .toggle-row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--border-light);}
    .toggle-row:last-child{border-bottom:none;}
    .toggle-row span{color:var(--text-secondary);}
    .toggle{width:44px;height:24px;border-radius:14px;background:var(--border);position:relative;cursor:pointer;transition:all .2s;}
    .toggle::after{content:"";position:absolute;top:3px;left:4px;width:18px;height:18px;border-radius:50%;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,0.12);transition:all .2s;}
    .toggle.is-on{background:var(--primary);}
    .toggle.is-on::after{transform:translateX(18px);}

    .quick-links{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px;}
    .quick-links a{border:1px solid var(--border);border-radius:var(--radius-md);padding:12px 14px;text-decoration:none;color:var(--text-main);font-weight:800;background:var(--bg-light);transition:all .2s;display:flex;align-items:center;justify-content:space-between;}
    .quick-links a:hover{border-color:rgba(45,129,255,0.35);background:var(--primary-light);}

    @media (max-width: 1100px){.settings-grid{grid-template-columns:1fr;}.sidebar{display:none;}.app-container{padding:16px;}.main-content{padding:0;}}
  </style>
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar__header">
        <div class="sidebar__logo">S</div>
        <div class="sidebar__title">StudySpace</div>
      </div>
      <nav class="sidebar__nav">
        <a href="桌面端-用户端-任务.html" class="sidebar__nav-item">任务</a>
        <a href="calendar_day.html" class="sidebar__nav-item">日历</a>
        <a href="桌面端-用户端-学习记录.html" class="sidebar__nav-item">学习记录</a>
        <a href="桌面-用户端-座位预约.html" class="sidebar__nav-item">座位预约</a>
        <a href="桌面端-用户端-设置.html" class="sidebar__nav-item active">个人设置</a>
      </nav>
      <div class="sidebar__footer">
        <div class="sidebar__avatar">用</div>
        <div>
          <div class="sidebar__user-name">StudyUser123</div>
          <div class="sidebar__user-id">ID: 887654321</div>
        </div>
      </div>
    </aside>

    <main class="main-content">
      <section class="page-header">
        <div class="page-header__top">
          <div class="page-title">
            <span class="dot"></span>
            <span>个人设置</span>
          </div>
          <div class="header-actions">
            <button class="btn" onclick="window.location.href='桌面端-用户端-任务.html'">回到任务</button>

            <button class="btn btn-primary" id="saveBtn" type="button">保存更改</button>

          </div>
        </div>
        <div class="page-desc">管理个人资料、安全偏好以及学习体验设置，保持账号信息最新。</div>
      </section>

      <section class="settings-grid">
        <div class="settings-card">
          <h3>个人资料</h3>
          <p class="desc">更新昵称、联系方式与个人签名，帮助同学识别你的账号。</p>
          <div class="field-group">
            <div class="field">
              <label>昵称</label>
              <input type="text" name="nickname" value="StudyUser123" />
            </div>
            <div class="field">
              <label>邮箱</label>
              <input type="email" name="email" value="student@studyspace.com" />
            </div>
            <div class="field">
              <label>手机号</label>
              <input type="tel" name="phone" value="138****7321" />
            </div>
            <div class="field">
              <label>年级 / 专业</label>
              <input type="text" name="grade" placeholder="如：大三 · 计算机科学" />
            </div>
          </div>
          <div class="field" style="margin-top:12px;">
            <label>个人签名</label>
            <textarea name="signature" placeholder="写点什么吧…">保持专注，每天都在进步。</textarea>
          </div>
        </div>

        <div class="settings-card">
          <h3>快捷入口</h3>
          <p class="desc">在需要时快速返回常用学习模块。</p>
          <div class="quick-links">
            <a href="桌面端-用户端-任务.html">任务管理 <span>→</span></a>
            <a href="calendar_day.html">日历视图 <span>→</span></a>
            <a href="桌面端-用户端-学习记录.html">学习记录 <span>→</span></a>
            <a href="桌面-用户端-座位预约.html">座位预约 <span>→</span></a>
          </div>
        </div>

        <div class="settings-card">
          <h3>安全与登录</h3>
          <p class="desc">管理密码、双重验证和登录设备，保障账号安全。</p>
          <div class="field-group">
            <div class="field">
              <label>登录密码</label>
              <div style="display:flex;gap:8px;align-items:center;">
                <input type="password" name="password" value="********" style="flex:1;" />
                <button class="btn" type="button">修改</button>
              </div>
            </div>
            <div class="field">
              <label>双重验证</label>
              <div style="display:flex;gap:8px;align-items:center;">
                <div class="toggle is-on" data-key="twoFactor" aria-label="已开启双重验证"></div>
                <span style="color:var(--text-secondary);font-weight:700;">手机号 · 尾号 7321</span>
              </div>
            </div>
          </div>
          <div class="toggle-row">
            <span>新设备登录提醒</span>
            <div class="toggle is-on" data-key="newDevice"></div>
          </div>
          <div class="toggle-row">
            <span>每日自动备份学习数据</span>
            <div class="toggle is-on" data-key="backup"></div>
          </div>
          <div class="toggle-row">
            <span>允许在座位预约时自动同步到日历</span>
            <div class="toggle" data-key="syncCalendar"></div>
          </div>
        </div>

        <div class="settings-card">
          <h3>学习体验</h3>
          <p class="desc">个性化提醒频率与界面偏好，保持高效专注。</p>
          <div class="field-group">
            <div class="field">
              <label>提醒频率</label>
              <select name="reminder">
                <option>默认 · 适中</option>
                <option>轻提醒 · 不打扰</option>
                <option>强化提醒 · 保持专注</option>
              </select>
            </div>
            <div class="field">
              <label>番茄钟时长</label>
              <select name="pomodoro">
                <option>25 分钟</option>
                <option>45 分钟</option>
                <option>60 分钟</option>
              </select>
            </div>
            <div class="field">
              <label>主题</label>
              <select name="theme">
                <option>浅色 · 默认</option>
                <option>深色 · 护眼</option>
              </select>
            </div>
            <div class="field">
              <label>首选座位区域</label>
              <select name="seatPref">
                <option>图书馆 自习区</option>
                <option>创新工坊 静音区</option>
                <option>学习咖啡厅</option>
              </select>
            </div>
          </div>
        </div>
      </section>
      <div id="saveToast" role="status" aria-live="polite" style="position:fixed;right:24px;bottom:24px;min-width:240px;padding:14px 16px;border-radius:12px;background:rgba(45,129,255,0.95);color:#fff;font-weight:800;box-shadow:var(--shadow-lg);opacity:0;transform:translateY(10px);transition:all .25s ease;pointer-events:none;">已保存你的设置</div>
    </main>
  </div>

  <script>
    const storageKey = 'studyspace-settings';
    const saveBtn = document.getElementById('saveBtn');
    const toast = document.getElementById('saveToast');
    const fields = Array.from(document.querySelectorAll('.field input, .field select, .field textarea'));
    const toggles = Array.from(document.querySelectorAll('.toggle'));

    const toggleState = new Proxy({}, {
      get: (obj, key) => obj[key] ?? false,
      set: (obj, key, value) => { obj[key] = value; return true; }
    });

    function syncToggleVisual(el, isOn){
      el.classList.toggle('is-on', isOn);
      el.setAttribute('aria-checked', isOn);
    }

    toggles.forEach(toggle => {
      const key = toggle.dataset.key || '';
      toggle.addEventListener('click', () => {
        const next = !toggle.classList.contains('is-on');
        syncToggleVisual(toggle, next);
        if(key) toggleState[key] = next;
      });
    });

    function showToast(){
      toast.style.opacity = '1';
      toast.style.transform = 'translateY(0)';
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateY(10px)';
      }, 1500);
    }

    function saveSettings(){
      const data = { fields: {}, toggles: {} };
      fields.forEach(input => { if(input.name) data.fields[input.name] = input.value; });
      toggles.forEach(t => { const key = t.dataset.key; if(key) data.toggles[key] = t.classList.contains('is-on'); });
      localStorage.setItem(storageKey, JSON.stringify(data));
      showToast();
    }

    function restoreSettings(){
      const saved = localStorage.getItem(storageKey);
      if(!saved) return;
      try{
        const data = JSON.parse(saved);
        if(data.fields){
          fields.forEach(input => {
            if(input.name && data.fields[input.name] !== undefined){
              input.value = data.fields[input.name];
            }
          });
        }
        if(data.toggles){
          toggles.forEach(t => {
            const key = t.dataset.key;
            if(key && data.toggles[key] !== undefined){
              const state = !!data.toggles[key];
              toggleState[key] = state;
              syncToggleVisual(t, state);
            }
          });
        }
      }catch(err){
        console.warn('无法读取已保存的设置', err);
      }
    }

    saveBtn.addEventListener('click', saveSettings);
    restoreSettings();
  </script>
</body>
</html>
