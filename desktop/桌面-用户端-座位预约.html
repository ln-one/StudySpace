<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudySpace - åº§ä½é¢„çº¦</title>

  <style>
    /* å…¨å±€å˜é‡ */
    :root {
      --primary: #2d81ff;
      --primary-light: #f0f7ff;
      --primary-dark: #1a6ee0;
      --success: #4cd964;
      --success-light: #e8f9eb;
      --danger: #ff3b30;
      --danger-light: #ffe6e6;
      --warning: #ff9500;
      --text-main: #1d1d1f;
      --text-secondary: #6e6e73;
      --text-tertiary: #8e8e93;
      --border: #e5e5e7;
      --border-light: #f2f2f7;
      --bg-light: #f5f5f7;
      --bg-white: #fff;
      --bg-sidebar: #f8f9fa;
      --bg-card: #ffffff;
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
      --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
      --glass-bg: rgba(255, 255, 255, 0.95);
      --glass-border: rgba(229, 229, 231, 0.5);
      --glass-blur: blur(10px);
    }

    /* åŸºç¡€æ ·å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e7ec 100%);
      color: var(--text-main);
      display: flex;
    }

    /* æ•´ä½“å¸ƒå±€ */
    .app-container {
      display: flex;
      width: 100%;
      height: 100vh;
      position: relative;
    }

    /* å·¦ä¾§å¯¼èˆªæ  */
    .sidebar {
      width: 240px;
      height: 100%;
      background: var(--bg-sidebar);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 100;
      flex-shrink: 0;
      overflow: hidden;
    }

    .sidebar__header {
      padding: 24px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .sidebar__logo {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--primary), #4d9eff);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
      font-weight: 700;
    }

    .sidebar__title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-main);
      letter-spacing: -0.5px;
    }

    .sidebar__nav {
      padding: 24px 0;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .sidebar__nav-item {
      display: flex;
      align-items: center;
      padding: 14px 20px;
      text-decoration: none;
      color: var(--text-secondary);
      transition: all 0.2s;
      position: relative;
      font-size: 15px;
      font-weight: 600;
      border-left: 3px solid transparent;
    }

    .sidebar__nav-item:hover {
      background: var(--bg-light);
      color: var(--text-main);
    }

    .sidebar__nav-item.active {
      background: var(--primary-light);
      color: var(--primary);
      border-left-color: var(--primary);
      font-weight: 800;
    }

    .sidebar__nav-icon {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      font-size: 16px;
    }

    .sidebar__nav-text {
      flex: 1;
    }

    .sidebar__footer {
      padding: 20px;
      border-top: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .sidebar__avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), #4d9eff);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      font-weight: 600;
      flex-shrink: 0;
    }

    .sidebar__user-info {
      flex: 1;
      min-width: 0;
    }

    .sidebar__user-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-main);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .sidebar__user-id {
      font-size: 12px;
      color: var(--text-tertiary);
    }

    /* ä¸»å†…å®¹åŒº */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      padding: 24px;
      position: relative;
    }

    /* é¡¶éƒ¨æœç´¢æ  */
    .search-header {
      background: var(--bg-white);
      border-radius: var(--radius-lg);
      padding: 20px 24px;
      box-shadow: var(--shadow-sm);
      margin-bottom: 24px;
      border: 1px solid var(--border);
      position: relative;
    }

    .search-header__title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .search-header__title-icon {
      color: var(--primary);
      font-size: 22px;
    }

    .search-filters {
      display: flex;
      align-items: center;
      gap: 24px;
      flex-wrap: wrap;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      min-width: 150px;
    }

    .filter-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .filter-select {
      width: 100%;
      height: 44px;
      padding: 0 16px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      background: var(--bg-white);
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(45, 129, 255, 0.1);
    }

    .date-picker-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .date-picker {
      width: 100%;
      height: 44px;
      padding: 0 16px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      background: var(--bg-white);
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      cursor: pointer;
      transition: all 0.2s;
    }

    .date-picker:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(45, 129, 255, 0.1);
    }

    .available-seats {
      margin-left: auto;
      padding: 12px 20px;
      background: var(--success-light);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(76, 217, 100, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 120px;
    }

    .available-seats__label {
      font-size: 12px;
      color: var(--text-tertiary);
      margin-bottom: 4px;
    }

    .available-seats__count {
      font-size: 28px;
      font-weight: 800;
      color: var(--success);
    }

    /* åº§ä½å›¾åŒºåŸŸ */
    .seat-map-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .seat-map-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .seat-map-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .seat-map-title-icon {
      color: var(--primary);
    }

    .area-tabs {
      display: flex;
      gap: 8px;
      background: var(--bg-light);
      padding: 4px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
    }

    .area-tab {
      padding: 8px 16px;
      border-radius: var(--radius-sm);
      font-size: 14px;
      font-weight: 600;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      background: transparent;
    }

    .area-tab:hover {
      background: var(--bg-white);
    }

    .area-tab.active {
      background: var(--primary);
      color: white;
    }

    .seat-map-container {
      flex: 1;
      background: var(--bg-white);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border);
      padding: 32px;
      overflow-y: auto;
      position: relative;
      min-height: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .seat-map-container::-webkit-scrollbar {
      width: 8px;
    }

    .seat-map-container::-webkit-scrollbar-track {
      background: var(--bg-light);
      border-radius: 4px;
    }

    .seat-map-container::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px;
    }

    .seat-map-container::-webkit-scrollbar-thumb:hover {
      background: var(--text-tertiary);
    }

    /* åº§ä½å›¾ - 6x5å¸ƒå±€ */
    .seat-map {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      grid-template-rows: repeat(5, 1fr);
      gap: 16px;
      width: 100%;
      max-width: 900px;
      height: 100%;
      max-height: 500px;
    }

    .seat {
      border-radius: var(--radius-lg);
      border: 2px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      user-select: none;
      position: relative;
      overflow: hidden;
      min-height: 80px;
    }

    .seat::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: currentColor;
      opacity: 0.1;
      z-index: 1;
    }

    .seat:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-md);
    }

    /* åº§ä½çŠ¶æ€ */
    .seat.available {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      color: #2d81ff;
      border-color: #2d81ff;
    }

    .seat.selected {
      background: linear-gradient(135deg, #2d81ff 0%, #4d9eff 100%);
      color: white;
      border-color: #2d81ff;
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(45, 129, 255, 0.3);
      z-index: 2;
    }

    .seat.booked {
      background: linear-gradient(135deg, #ffd591 0%, #ffc069 100%);
      border-color: #ffa726;
      color: #e65100;
      cursor: not-allowed;
    }

    .seat.booked-by-me {
      background: linear-gradient(135deg, #2d81ff 0%, #4d9eff 100%);
      border-color: #2d81ff;
      color: white;
      cursor: pointer;
    }

    .seat.using {
      background: linear-gradient(135deg, #b7eb8f 0%, #95de64 100%);
      border-color: #73d13d;
      color: #237804;
      cursor: not-allowed;
    }

    .seat.unavailable {
      background: linear-gradient(135deg, #f5f5f7 0%, #e8e8ed 100%);
      border-color: #d1d1d6;
      color: #8e8e93;
      cursor: not-allowed;
    }

    /* åº§ä½å›¾ä¾‹ */
    .seat-legends {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 24px;
      padding: 16px;
      background: var(--bg-light);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      justify-content: center;
    }

    .seat-legend {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--text-secondary);
      padding: 8px 16px;
      background: var(--bg-white);
      border-radius: 20px;
      border: 1px solid var(--border);
    }

    .seat-legend-color {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      border: 2px solid rgba(0,0,0,0.1);
    }

    /* å³ä¾§åº§ä½è¯¦æƒ… */
    .seat-details {
      width: 360px;
      height: 100%;
      background: var(--bg-white);
      border-left: 1px solid var(--border);
      padding: 24px;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      overflow-y: auto;
    }

    .seat-details__header {
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border);
    }

    .seat-details__title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 8px;
    }

    .seat-details__subtitle {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .seat-details__content {
      flex: 1;
    }

    .seat-info-card {
      background: var(--bg-light);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }

    .seat-info__item {
      margin-bottom: 20px;
    }

    .seat-info__item:last-child {
      margin-bottom: 0;
    }

    .seat-info__label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 6px;
    }

    .seat-info__value {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .seat-number {
      font-size: 36px;
      font-weight: 800;
      color: var(--primary);
      margin: 12px 0;
      text-align: center;
    }

    .facilities-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .facility-tag {
      padding: 8px 14px;
      background: var(--bg-white);
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .facility-tag i {
      font-size: 12px;
    }

    .status-badge {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      margin-top: 6px;
    }

    .status-available {
      background: rgba(76, 217, 100, 0.1);
      color: var(--success);
      border: 1px solid rgba(76, 217, 100, 0.3);
    }

    .status-booked {
      background: rgba(255, 149, 0, 0.1);
      color: var(--warning);
      border: 1px solid rgba(255, 149, 0, 0.3);
    }

    .status-booked-by-me {
      background: rgba(45, 129, 255, 0.1);
      color: var(--primary);
      border: 1px solid rgba(45, 129, 255, 0.3);
    }

    .status-using {
      background: rgba(76, 217, 100, 0.1);
      color: var(--success);
      border: 1px solid rgba(76, 217, 100, 0.3);
    }

    .datetime-display {
      background: var(--bg-white);
      border-radius: var(--radius-md);
      padding: 14px;
      border: 1px solid var(--border);
      margin-top: 8px;
    }

    .datetime-value {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      text-align: center;
    }

    /* æ—¶é—´é€‰æ‹©å™¨ */
    .time-picker-container {
      margin-top: 16px;
    }

    .time-picker-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .time-slots {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .time-slot {
      flex: 1;
      min-width: calc(50% - 8px);
      padding: 10px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      background: var(--bg-white);
      font-size: 14px;
      font-weight: 600;
      color: var(--text-main);
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .time-slot:hover {
      border-color: var(--primary);
      background: var(--primary-light);
    }

    .time-slot.selected {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* æŒ‰é’®å®¹å™¨ */
    .btn-container {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .btn {
      width: 100%;
      height: 56px;
      color: white;
      border: none;
      border-radius: var(--radius-lg);
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      box-shadow: 0 6px 20px rgba(45, 129, 255, 0.25);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 28px rgba(45, 129, 255, 0.3);
    }

    .btn-danger {
      background: linear-gradient(135deg, var(--danger), #ff6666);
      box-shadow: 0 6px 20px rgba(255, 59, 48, 0.25);
    }

    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 28px rgba(255, 59, 48, 0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn:disabled {
      background: var(--text-tertiary);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn i {
      font-size: 18px;
    }

    /* æç¤ºä¿¡æ¯ */
    .hint-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      -webkit-backdrop-filter: var(--glass-blur);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: 32px 40px;
      box-shadow: var(--shadow-lg);
      z-index: 2000;
      max-width: 400px;
      width: 90%;
      text-align: center;
      display: none;
      animation: fadeIn 0.3s ease-out;
    }

    .hint-container.active {
      display: block;
    }

    .hint-icon {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), #4d9eff);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      color: white;
      font-size: 28px;
    }

    .hint-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 12px;
    }

    .hint-message {
      font-size: 15px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .hint-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .hint-btn {
      padding: 12px 24px;
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid var(--border);
      background: var(--bg-white);
      color: var(--text-main);
    }

    .hint-btn-primary {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .hint-btn-primary:hover {
      background: var(--primary-dark);
    }

    .hint-btn:hover {
      background: var(--bg-light);
    }

    /* åŠ¨ç”» */
    @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -55%); }
      to { opacity: 1; transform: translate(-50%, -50%); }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    /* å“åº”å¼è°ƒæ•´ */
    @media (max-width: 1200px) {
      .seat-map {
        grid-template-columns: repeat(6, 1fr);
        grid-template-rows: repeat(5, 1fr);
      }

      .seat-details {
        width: 320px;
      }
    }

    @media (max-width: 992px) {
      .app-container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        flex-direction: row;
        align-items: center;
        padding: 0 20px;
      }

      .sidebar__nav {
        flex-direction: row;
        padding: 0;
        margin: 0 20px;
      }

      .sidebar__nav-item {
        padding: 14px 16px;
        border-left: none;
        border-bottom: 3px solid transparent;
      }

      .sidebar__nav-item.active {
        border-left: none;
        border-bottom-color: var(--primary);
      }

      .main-content {
        padding: 20px;
      }

      .seat-details {
        width: 100%;
        height: auto;
        border-left: none;
        border-top: 1px solid var(--border);
      }

      .seat-map {
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(6, 1fr);
      }
    }

    @media (max-width: 768px) {
      .seat-map {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(6, 1fr);
      }

      .search-filters {
        flex-direction: column;
        align-items: flex-start;
      }

      .available-seats {
        margin-left: 0;
        margin-top: 16px;
      }
    }
  </style>
</head>
<body>
<div class="app-container">
  <!-- å·¦ä¾§å¯¼èˆªæ  -->
  <aside class="sidebar">
    <div class="sidebar__header">
      <div class="sidebar__logo">S</div>
      <div class="sidebar__title">StudySpace</div>
    </div>

    <nav class="sidebar__nav">
      <a href="æ¡Œé¢ç«¯-ç”¨æˆ·ç«¯-ä»»åŠ¡.html" class="sidebar__nav-item">ä»»åŠ¡</a>
      <a href="calendar_day.html" class="sidebar__nav-item">æ—¥å†</a>
      <a href="æ¡Œé¢ç«¯-ç”¨æˆ·ç«¯-å­¦ä¹ è®°å½•.html" class="sidebar__nav-item">å­¦ä¹ è®°å½•</a>
      <a href="æ¡Œé¢-ç”¨æˆ·ç«¯-åº§ä½é¢„çº¦.html" class="sidebar__nav-item active">åº§ä½é¢„çº¦</a>

      <a href="æ¡Œé¢ç«¯-ç”¨æˆ·ç«¯-è®¾ç½®.html" class="sidebar__nav-item">ä¸ªäººè®¾ç½®</a>

    </nav>

    <div class="sidebar__footer">
      <div class="sidebar__avatar">ç”¨</div>
      <div class="sidebar__user-info">
        <div class="sidebar__user-name">StudyUser123</div>
        <div class="sidebar__user-id">ID: 887654321</div>
      </div>
    </div>
  </aside>

  <!-- ä¸»å†…å®¹åŒº -->
  <div class="main-content">
    <!-- é¡¶éƒ¨æœç´¢æ  -->
    <div class="search-header">
      <div class="search-header__title">
        <div class="search-header__title-icon">ğŸ’º</div>
        <span>åº§ä½é¢„çº¦</span>
      </div>

      <div class="search-filters">
        <div class="filter-group">
          <div class="filter-label">æ¥¼å±‚</div>
          <select class="filter-select" id="floorSelect">
            <option value="1">æ¥¼å±‚ 1</option>
            <option value="2" selected>æ¥¼å±‚ 2</option>
            <option value="3">æ¥¼å±‚ 3</option>
            <option value="4">æ¥¼å±‚ 4</option>
          </select>
        </div>

        <div class="filter-group">
          <div class="filter-label">åŒºåŸŸ</div>
          <select class="filter-select" id="areaSelect">
            <option value="A" selected>åŒºåŸŸ A</option>
            <option value="B">åŒºåŸŸ B</option>
            <option value="C">åŒºåŸŸ C</option>
            <option value="D">åŒºåŸŸ D</option>
          </select>
        </div>

        <div class="filter-group">
          <div class="filter-label">æ—¥æœŸ</div>
          <div class="date-picker-container">
            <input type="date" class="date-picker" id="datePicker" value="2025-11-29">
          </div>
        </div>

        <div class="available-seats">
          <div class="available-seats__label">ç©ºä½æ•°</div>
          <div class="available-seats__count" id="availableSeatsCount">18</div>
        </div>
      </div>
    </div>

    <!-- åº§ä½å›¾åŒºåŸŸ -->
    <div class="seat-map-area">
      <div class="seat-map-header">
        <div class="seat-map-title">
          <div class="seat-map-title-icon">ğŸ“</div>
          <span id="seatMapTitle">åŒºåŸŸ A - åº§ä½å›¾</span>
        </div>

        <div class="area-tabs">
          <button class="area-tab active" data-area="A">åŒºåŸŸ A</button>
          <button class="area-tab" data-area="B">åŒºåŸŸ B</button>
          <button class="area-tab" data-area="C">åŒºåŸŸ C</button>
          <button class="area-tab" data-area="D">åŒºåŸŸ D</button>
        </div>
      </div>

      <div class="seat-map-container">
        <div class="seat-map" id="seatMap">
          <!-- åº§ä½å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
        </div>
      </div>

      <!-- åº§ä½å›¾ä¾‹ -->
      <div class="seat-legends">
        <div class="seat-legend">
          <div class="seat-legend-color" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border-color: #2d81ff;"></div>
          <span>å¯ç”¨</span>
        </div>
        <div class="seat-legend">
          <div class="seat-legend-color" style="background: linear-gradient(135deg, #ffd591 0%, #ffc069 100%); border-color: #ffa726;"></div>
          <span>å·²é¢„çº¦(ä»–äºº)</span>
        </div>
        <div class="seat-legend">
          <div class="seat-legend-color" style="background: linear-gradient(135deg, #2d81ff 0%, #4d9eff 100%); border-color: #2d81ff;"></div>
          <span>å·²é¢„çº¦(æˆ‘çš„)</span>
        </div>
        <div class="seat-legend">
          <div class="seat-legend-color" style="background: linear-gradient(135deg, #b7eb8f 0%, #95de64 100%); border-color: #73d13d;"></div>
          <span>ä½¿ç”¨ä¸­</span>
        </div>
        <div class="seat-legend">
          <div class="seat-legend-color" style="background: linear-gradient(135deg, #f5f5f7 0%, #e8e8ed 100%); border-color: #d1d1d6;"></div>
          <span>ä¸å¯ç”¨</span>
        </div>
      </div>
    </div>
  </div>

  <!-- å³ä¾§åº§ä½è¯¦æƒ… -->
  <div class="seat-details">
    <div class="seat-details__header">
      <div class="seat-details__title">åº§ä½è¯¦ç»†ä¿¡æ¯</div>
      <div class="seat-details__subtitle">é€‰æ‹©åº§ä½æŸ¥çœ‹è¯¦æƒ…å¹¶è¿›è¡Œé¢„çº¦</div>
    </div>

    <div class="seat-details__content">
      <div class="seat-info-card">
        <div class="seat-info__item">
          <div class="seat-info__label">åº§ä½å·</div>
          <div class="seat-number" id="seatNumber">A15</div>
        </div>

        <div class="seat-info__item">
          <div class="seat-info__label">è®¾æ–½</div>
          <div class="facilities-list" id="facilitiesList">
            <div class="facility-tag">ğŸ’¡ å°ç¯</div>
            <div class="facility-tag">ğŸ”Œ ç”µæº</div>
            <div class="facility-tag">ğŸ“¶ WiFi</div>
            <div class="facility-tag">ğŸ§ éš”éŸ³</div>
          </div>
        </div>

        <div class="seat-info__item">
          <div class="seat-info__label">é¢„çº¦çŠ¶æ€</div>
          <div class="seat-info__value">
            <span id="seatStatus">å¯ç”¨</span>
            <span class="status-badge status-available" id="statusBadge">ç©ºé—²</span>
          </div>
        </div>

        <!-- æ—¶é—´é€‰æ‹©å™¨ -->
        <div class="seat-info__item time-picker-container">
          <div class="seat-info__label">é¢„çº¦æ—¶é—´</div>
          <div class="time-slots" id="timeSlots">
            <div class="time-slot" data-time="08:00-10:00">08:00-10:00</div>
            <div class="time-slot" data-time="10:00-12:00">10:00-12:00</div>
            <div class="time-slot" data-time="13:00-15:00">13:00-15:00</div>
            <div class="time-slot" data-time="15:00-17:00">15:00-17:00</div>
            <div class="time-slot" data-time="18:00-20:00">18:00-20:00</div>
            <div class="time-slot" data-time="20:00-22:00">20:00-22:00</div>
          </div>
        </div>

        <div class="seat-info__item">
          <div class="seat-info__label">é¢„çº¦æ—¥æœŸå’Œæ—¶é—´</div>
          <div class="datetime-display">
            <div class="datetime-value" id="datetimeValue">2025/11/29 08:00-10:00</div>
          </div>
        </div>
      </div>

      <div class="btn-container">
        <button class="btn btn-primary" id="reserveBtn">
          <i>âœ“</i>
          <span>é¢„çº¦åº§ä½</span>
        </button>
        <button class="btn btn-danger" id="cancelBtn" disabled>
          <i>âœ—</i>
          <span>å–æ¶ˆé¢„çº¦</span>
        </button>
      </div>
    </div>
  </div>

  <!-- æç¤ºä¿¡æ¯ -->
  <div class="hint-container" id="hintContainer">
    <div class="hint-icon">ğŸ’º</div>
    <div class="hint-title" id="hintTitle">é¢„çº¦æˆåŠŸ</div>
    <div class="hint-message" id="hintMessage">åº§ä½ A15 å·²æˆåŠŸé¢„çº¦ï¼Œé¢„çº¦æ—¶é—´ï¼š2025/11/29 08:00-10:00</div>
    <div class="hint-actions">
      <button class="hint-btn" onclick="closeHint()">å–æ¶ˆ</button>
      <button class="hint-btn hint-btn-primary" onclick="closeHint()">ç¡®å®š</button>
    </div>
  </div>
</div>

<script>
  // å…¨å±€å˜é‡
  let selectedSeat = null;
  let selectedArea = 'A';
  let selectedFloor = '2';
  let selectedDate = '2025-11-29';
  let selectedTime = '08:00-10:00';
  let currentUserId = "user123"; // å½“å‰ç”¨æˆ·ID

  // åº§ä½æ•°æ® - æ¨¡æ‹Ÿ6x5å¸ƒå±€ï¼ˆ30ä¸ªåº§ä½ï¼‰
  const generateSeatData = (area) => {
    const seats = [];
    const facilitiesOptions = [
      ['ğŸ’¡ å°ç¯', 'ğŸ”Œ ç”µæº', 'ğŸ“¶ WiFi'],
      ['ğŸ’¡ å°ç¯', 'ğŸ”Œ ç”µæº'],
      ['ğŸ”Œ ç”µæº', 'ğŸ“¶ WiFi'],
      ['ğŸ’¡ å°ç¯', 'ğŸ“¶ WiFi', 'ğŸ§ éš”éŸ³'],
      ['ğŸ’¡ å°ç¯', 'ğŸ”Œ ç”µæº', 'ğŸ“¶ WiFi', 'ğŸ§ éš”éŸ³']
    ];

    // å·²é¢„çº¦çš„åº§ä½ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
    const bookedSeats = {
      'A03': {userId: 'other456', time: '10:00-12:00'},
      'A08': {userId: currentUserId, time: '13:00-15:00'}, // å½“å‰ç”¨æˆ·é¢„çº¦çš„åº§ä½
      'A11': {userId: 'other789', time: '15:00-17:00'},
      'A18': {userId: 'other101', time: '18:00-20:00'},
      'A22': {userId: currentUserId, time: '20:00-22:00'}, // å½“å‰ç”¨æˆ·é¢„çº¦çš„åº§ä½
      'B05': {userId: 'other202', time: '08:00-10:00'},
      'B12': {userId: 'other303', time: '10:00-12:00'},
      'C07': {userId: currentUserId, time: '15:00-17:00'}, // å½“å‰ç”¨æˆ·é¢„çº¦çš„åº§ä½
      'C14': {userId: 'other404', time: '18:00-20:00'},
      'D09': {userId: 'other505', time: '20:00-22:00'}
    };

    // ä½¿ç”¨ä¸­çš„åº§ä½
    const usingSeats = ['A05', 'A15', 'B08', 'C12', 'D03'];

    // ä¸å¯ç”¨çš„åº§ä½
    const unavailableSeats = ['A17', 'B22', 'C08', 'D18'];

    // ç”Ÿæˆ6x5åº§ä½å¸ƒå±€
    for (let i = 1; i <= 5; i++) {
      for (let j = 1; j <= 6; j++) {
        const seatNumber = `${area}${(i-1)*6 + j}`;

        // ç¡®å®šåº§ä½çŠ¶æ€
        let status, userId = null, bookedTime = null;

        if (bookedSeats[seatNumber]) {
          status = bookedSeats[seatNumber].userId === currentUserId ? 'booked-by-me' : 'booked';
          userId = bookedSeats[seatNumber].userId;
          bookedTime = bookedSeats[seatNumber].time;
        } else if (usingSeats.includes(seatNumber)) {
          status = 'using';
        } else if (unavailableSeats.includes(seatNumber)) {
          status = 'unavailable';
        } else {
          status = 'available';
        }

        // éšæœºé€‰æ‹©è®¾æ–½
        const facilities = facilitiesOptions[Math.floor(Math.random() * facilitiesOptions.length)];

        seats.push({
          seat: seatNumber,
          status: status,
          facilities: facilities,
          userId: userId,
          bookedTime: bookedTime
        });
      }
    }

    return seats;
  };

  // åˆå§‹åŒ–åº§ä½æ•°æ®
  const seatData = {
    'A': generateSeatData('A'),
    'B': generateSeatData('B'),
    'C': generateSeatData('C'),
    'D': generateSeatData('D')
  };

  // DOMå…ƒç´ 
  const seatMapElement = document.getElementById('seatMap');
  const seatMapTitle = document.getElementById('seatMapTitle');
  const floorSelect = document.getElementById('floorSelect');
  const areaSelect = document.getElementById('areaSelect');
  const datePicker = document.getElementById('datePicker');
  const areaTabs = document.querySelectorAll('.area-tab');
  const availableSeatsCount = document.getElementById('availableSeatsCount');
  const seatNumber = document.getElementById('seatNumber');
  const facilitiesList = document.getElementById('facilitiesList');
  const seatStatus = document.getElementById('seatStatus');
  const statusBadge = document.getElementById('statusBadge');
  const datetimeValue = document.getElementById('datetimeValue');
  const timeSlots = document.querySelectorAll('.time-slot');
  const reserveBtn = document.getElementById('reserveBtn');
  const cancelBtn = document.getElementById('cancelBtn');
  const hintContainer = document.getElementById('hintContainer');
  const hintTitle = document.getElementById('hintTitle');
  const hintMessage = document.getElementById('hintMessage');

  // åˆå§‹åŒ–å‡½æ•°
  function init() {
    // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
    initDatePicker();

    // åˆå§‹åŒ–åº§ä½å›¾
    generateSeatMap('A');

    // åˆå§‹åŒ–æ—¶é—´é€‰æ‹©å™¨
    initTimePicker();

    // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
    initEventListeners();

    // æ›´æ–°å¯ç”¨åº§ä½æ•°
    updateAvailableSeatsCount();

    // é»˜è®¤é€‰ä¸­A15åº§ä½
    setTimeout(() => {
      const defaultSeat = document.querySelector('[data-seat="A15"]');
      if (defaultSeat) {
        handleSeatClick(defaultSeat, seatData['A'].find(seat => seat.seat === 'A15'));
      }
    }, 100);
  }

  // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
  function initDatePicker() {
    // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
    const today = new Date();
    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0');
    const day = String(today.getDate()).padStart(2, '0');
    const todayStr = `${year}-${month}-${day}`;

    // è®¾ç½®æœ€å°æ—¥æœŸä¸ºä»Šå¤©
    datePicker.min = todayStr;

    // è®¾ç½®æœ€å¤§æ—¥æœŸä¸ºä»Šå¤©+30å¤©
    const maxDate = new Date();
    maxDate.setDate(today.getDate() + 30);
    const maxYear = maxDate.getFullYear();
    const maxMonth = String(maxDate.getMonth() + 1).padStart(2, '0');
    const maxDay = String(maxDate.getDate()).padStart(2, '0');
    datePicker.max = `${maxYear}-${maxMonth}-${maxDay}`;

    // è®¾ç½®é»˜è®¤å€¼
    datePicker.value = selectedDate;
  }

  // åˆå§‹åŒ–æ—¶é—´é€‰æ‹©å™¨
  function initTimePicker() {
    timeSlots.forEach(slot => {
      slot.addEventListener('click', () => {
        // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
        timeSlots.forEach(s => s.classList.remove('selected'));

        // è®¾ç½®å½“å‰é€‰ä¸­
        slot.classList.add('selected');
        selectedTime = slot.dataset.time;

        // æ›´æ–°æ—¥æœŸæ—¶é—´æ˜¾ç¤º
        updateDateTimeDisplay();
      });
    });

    // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªæ—¶é—´æ®µ
    timeSlots[0].classList.add('selected');
  }

  // æ›´æ–°æ—¥æœŸæ—¶é—´æ˜¾ç¤º
  function updateDateTimeDisplay() {
    const dateStr = selectedDate.split('-').join('/');
    datetimeValue.textContent = `${dateStr} ${selectedTime}`;
  }

  // ç”Ÿæˆåº§ä½å›¾
  function generateSeatMap(area) {
    seatMapElement.innerHTML = '';
    selectedArea = area;

    // æ›´æ–°æ ‡é¢˜
    seatMapTitle.textContent = `åŒºåŸŸ ${area} - åº§ä½å›¾`;

    // æ›´æ–°åŒºåŸŸé€‰æ‹©å™¨
    areaSelect.value = area;

    // æ›´æ–°åŒºåŸŸæ ‡ç­¾
    areaTabs.forEach(tab => {
      if (tab.dataset.area === area) {
        tab.classList.add('active');
      } else {
        tab.classList.remove('active');
      }
    });

    // è·å–å½“å‰åŒºåŸŸçš„åº§ä½æ•°æ®
    const seats = seatData[area];

    // ç”Ÿæˆåº§ä½å…ƒç´ 
    seats.forEach(seatData => {
      const seatElement = document.createElement('div');
      seatElement.className = `seat ${seatData.status}`;
      seatElement.textContent = seatData.seat;
      seatElement.dataset.seat = seatData.seat;
      seatElement.dataset.status = seatData.status;
      seatElement.dataset.userId = seatData.userId || '';
      seatElement.dataset.bookedTime = seatData.bookedTime || '';
      seatElement.dataset.facilities = seatData.facilities.join(',');

      // ç‚¹å‡»äº‹ä»¶
      seatElement.addEventListener('click', () => {
        handleSeatClick(seatElement, seatData);
      });

      seatMapElement.appendChild(seatElement);
    });

    // æ›´æ–°å¯ç”¨åº§ä½æ•°
    updateAvailableSeatsCount();
  }

  // å¤„ç†åº§ä½ç‚¹å‡»
  function handleSeatClick(seatElement, seatData) {
    const seatId = seatData.seat;
    const seatStatusValue = seatData.status;

    // æ£€æŸ¥åº§ä½çŠ¶æ€
    if (seatStatusValue === 'unavailable') {
      showHint('åº§ä½ä¸å¯ç”¨', `åº§ä½ ${seatId} ä¸å¯ç”¨ï¼Œè¯·é€‰æ‹©å…¶ä»–åº§ä½ã€‚`);
      return;
    }

    if (seatStatusValue === 'using') {
      showHint('åº§ä½ä½¿ç”¨ä¸­', `åº§ä½ ${seatId} æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œè¯·é€‰æ‹©å…¶ä»–åº§ä½ã€‚`);
      return;
    }

    if (seatStatusValue === 'booked' && seatData.userId !== currentUserId) {
      showHint('åº§ä½å·²é¢„çº¦', `åº§ä½ ${seatId} å·²è¢«ä»–äººé¢„çº¦ï¼Œè¯·é€‰æ‹©å…¶ä»–åº§ä½ã€‚`);
      return;
    }

    // å¦‚æœå·²é€‰ä¸­å…¶ä»–åº§ä½ï¼Œå–æ¶ˆé€‰ä¸­
    if (selectedSeat && selectedSeat !== seatElement) {
      selectedSeat.classList.remove('selected');
    }

    // é€‰ä¸­å½“å‰åº§ä½
    seatElement.classList.add('selected');
    selectedSeat = seatElement;

    // æ›´æ–°åº§ä½è¯¦æƒ…
    updateSeatDetails(seatData);

    // æ ¹æ®åº§ä½çŠ¶æ€æ›´æ–°æŒ‰é’®çŠ¶æ€
    if (seatStatusValue === 'available') {
      reserveBtn.disabled = false;
      cancelBtn.disabled = true;
      reserveBtn.textContent = 'é¢„çº¦åº§ä½';
    } else if (seatStatusValue === 'booked-by-me') {
      reserveBtn.disabled = true;
      cancelBtn.disabled = false;
      reserveBtn.textContent = 'å·²é¢„çº¦(æˆ‘çš„)';
    } else if (seatStatusValue === 'booked') {
      reserveBtn.disabled = true;
      cancelBtn.disabled = true;
      reserveBtn.textContent = 'å·²é¢„çº¦(ä»–äºº)';
    } else if (seatStatusValue === 'using') {
      reserveBtn.disabled = true;
      cancelBtn.disabled = true;
      reserveBtn.textContent = 'ä½¿ç”¨ä¸­';
    }
  }

  // æ›´æ–°åº§ä½è¯¦æƒ…
  function updateSeatDetails(seatData) {
    seatNumber.textContent = seatData.seat;

    // æ›´æ–°è®¾æ–½åˆ—è¡¨
    updateFacilitiesList(seatData.facilities);

    // æ›´æ–°çŠ¶æ€
    let statusText, statusClass, statusBadgeText;
    switch(seatData.status) {
      case 'available':
        statusText = 'å¯ç”¨';
        statusClass = 'status-available';
        statusBadgeText = 'ç©ºé—²';
        break;
      case 'booked':
        statusText = 'å·²é¢„çº¦';
        statusClass = 'status-booked';
        statusBadgeText = 'ä»–äººé¢„çº¦';
        break;
      case 'booked-by-me':
        statusText = 'å·²é¢„çº¦';
        statusClass = 'status-booked-by-me';
        statusBadgeText = 'æˆ‘çš„é¢„çº¦';
        break;
      case 'using':
        statusText = 'ä½¿ç”¨ä¸­';
        statusClass = 'status-using';
        statusBadgeText = 'ä½¿ç”¨ä¸­';
        break;
      case 'unavailable':
        statusText = 'ä¸å¯ç”¨';
        statusClass = 'status-unavailable';
        statusBadgeText = 'ä¸å¯ç”¨';
        break;
    }

    seatStatus.textContent = statusText;
    statusBadge.textContent = statusBadgeText;
    statusBadge.className = `status-badge ${statusClass}`;

    // å¦‚æœæ˜¯å·²é¢„çº¦çš„åº§ä½ï¼Œæ˜¾ç¤ºé¢„çº¦æ—¶é—´
    if (seatData.bookedTime) {
      const dateStr = selectedDate.split('-').join('/');
      datetimeValue.textContent = `${dateStr} ${seatData.bookedTime}`;
    } else {
      updateDateTimeDisplay();
    }
  }

  // æ›´æ–°è®¾æ–½åˆ—è¡¨
  function updateFacilitiesList(facilities) {
    facilitiesList.innerHTML = '';

    facilities.forEach(facility => {
      const facilityTag = document.createElement('div');
      facilityTag.className = 'facility-tag';
      facilityTag.textContent = facility;
      facilitiesList.appendChild(facilityTag);
    });
  }

  // æ›´æ–°å¯ç”¨åº§ä½æ•°
  function updateAvailableSeatsCount() {
    const currentAreaSeats = seatData[selectedArea];
    const availableCount = currentAreaSeats.filter(seat => seat.status === 'available').length;
    availableSeatsCount.textContent = availableCount;
  }

  // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
  function initEventListeners() {
    // æ¥¼å±‚é€‰æ‹©
    floorSelect.addEventListener('change', () => {
      selectedFloor = floorSelect.value;
      showHint('æ¥¼å±‚åˆ‡æ¢', `å·²åˆ‡æ¢åˆ° ${selectedFloor} æ¥¼`);
      updateAvailableSeatsCount();
    });

    // åŒºåŸŸé€‰æ‹©ï¼ˆä¸‹æ‹‰èœå•ï¼‰
    areaSelect.addEventListener('change', () => {
      generateSeatMap(areaSelect.value);
      updateAvailableSeatsCount();
      resetSelection();
    });

    // åŒºåŸŸæ ‡ç­¾
    areaTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const area = tab.dataset.area;
        generateSeatMap(area);
        updateAvailableSeatsCount();
        resetSelection();
      });
    });

    // æ—¥æœŸé€‰æ‹©
    datePicker.addEventListener('change', () => {
      selectedDate = datePicker.value;
      updateDateTimeDisplay();
      showHint('æ—¥æœŸé€‰æ‹©', `å·²é€‰æ‹©æ—¥æœŸï¼š${selectedDate.split('-').join('/')}`);
    });

    // é¢„çº¦æŒ‰é’®
    reserveBtn.addEventListener('click', () => {
      if (!selectedSeat) return;

      const seatId = selectedSeat.dataset.seat;
      const currentStatus = selectedSeat.dataset.status;

      if (currentStatus === 'booked' || currentStatus === 'booked-by-me') {
        showHint('æç¤º', `åº§ä½ ${seatId} å·²è¢«é¢„çº¦ï¼Œæ— æ³•å†æ¬¡é¢„çº¦ã€‚`);
      } else {
        showReservationConfirm(seatId);
      }
    });

    // å–æ¶ˆé¢„çº¦æŒ‰é’®
    cancelBtn.addEventListener('click', () => {
      if (!selectedSeat) return;

      const seatId = selectedSeat.dataset.seat;
      const currentUserIdAttr = selectedSeat.dataset.userId;

      // åªèƒ½å–æ¶ˆè‡ªå·±é¢„çº¦çš„åº§ä½
      if (currentUserIdAttr === currentUserId) {
        showCancelConfirm(seatId);
      } else {
        showHint('æ— æ³•å–æ¶ˆ', `åº§ä½ ${seatId} ä¸æ˜¯æ‚¨é¢„çº¦çš„ï¼Œæ— æ³•å–æ¶ˆã€‚`);
      }
    });
  }

  // é‡ç½®é€‰æ‹©
  function resetSelection() {
    selectedSeat = null;
    seatNumber.textContent = '--';
    seatStatus.textContent = 'æœªé€‰æ‹©';
    statusBadge.textContent = 'ç©ºé—²';
    statusBadge.className = 'status-badge status-available';
    reserveBtn.disabled = true;
    cancelBtn.disabled = true;
    reserveBtn.textContent = 'é¢„çº¦åº§ä½';

    // æ›´æ–°è®¾æ–½åˆ—è¡¨ä¸ºé»˜è®¤
    updateFacilitiesList(['ğŸ’¡ å°ç¯', 'ğŸ”Œ ç”µæº', 'ğŸ“¶ WiFi', 'ğŸ§ éš”éŸ³']);

    // æ›´æ–°æ—¥æœŸæ—¶é—´æ˜¾ç¤º
    updateDateTimeDisplay();
  }

  // æ˜¾ç¤ºé¢„çº¦ç¡®è®¤
  function showReservationConfirm(seatId) {
    hintTitle.textContent = 'ç¡®è®¤é¢„çº¦';
    hintMessage.textContent = `ç¡®è®¤é¢„çº¦åº§ä½ ${seatId} å—ï¼Ÿ\né¢„çº¦æ—¶é—´ï¼š${selectedDate.split('-').join('/')} ${selectedTime}\næ¥¼å±‚ï¼š${selectedFloor}æ¥¼ï¼ŒåŒºåŸŸï¼š${selectedArea}`;

    // æ›´æ–°ç¡®è®¤æŒ‰é’®äº‹ä»¶
    const confirmBtn = hintContainer.querySelector('.hint-btn-primary');
    confirmBtn.onclick = () => {
      confirmReservation(seatId);
    };

    hintContainer.classList.add('active');
  }

  // æ˜¾ç¤ºå–æ¶ˆé¢„çº¦ç¡®è®¤
  function showCancelConfirm(seatId) {
    hintTitle.textContent = 'å–æ¶ˆé¢„çº¦';
    hintMessage.textContent = `ç¡®è®¤å–æ¶ˆåº§ä½ ${seatId} çš„é¢„çº¦å—ï¼Ÿ`;

    // æ›´æ–°ç¡®è®¤æŒ‰é’®äº‹ä»¶
    const confirmBtn = hintContainer.querySelector('.hint-btn-primary');
    confirmBtn.onclick = () => {
      confirmCancelReservation(seatId);
    };

    hintContainer.classList.add('active');
  }

  // ç¡®è®¤é¢„çº¦
  function confirmReservation(seatId) {
    // æ›´æ–°åº§ä½çŠ¶æ€
    if (selectedSeat) {
      selectedSeat.classList.remove('available', 'selected');
      selectedSeat.classList.add('booked-by-me');
      selectedSeat.dataset.status = 'booked-by-me';
      selectedSeat.dataset.userId = currentUserId;
      selectedSeat.dataset.bookedTime = selectedTime;

      // æ›´æ–°åº§ä½æ•°æ®
      const seatIndex = seatData[selectedArea].findIndex(seat => seat.seat === seatId);
      if (seatIndex !== -1) {
        seatData[selectedArea][seatIndex].status = 'booked-by-me';
        seatData[selectedArea][seatIndex].userId = currentUserId;
        seatData[selectedArea][seatIndex].bookedTime = selectedTime;
      }

      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      reserveBtn.disabled = true;
      cancelBtn.disabled = false;
      reserveBtn.textContent = 'å·²é¢„çº¦(æˆ‘çš„)';

      // æ›´æ–°åº§ä½è¯¦æƒ…
      updateSeatDetails(seatData[selectedArea][seatIndex]);

      // æ›´æ–°å¯ç”¨åº§ä½æ•°
      updateAvailableSeatsCount();

      // æ˜¾ç¤ºæˆåŠŸæç¤º
      const dateStr = selectedDate.split('-').join('/');
      showHint('é¢„çº¦æˆåŠŸ',
              `åº§ä½ ${seatId} é¢„çº¦æˆåŠŸï¼\né¢„çº¦æ—¶é—´ï¼š${dateStr} ${selectedTime}\næ¥¼å±‚ï¼š${selectedFloor}æ¥¼ï¼ŒåŒºåŸŸï¼š${selectedArea}\nè¯·æŒ‰æ—¶åˆ°è¾¾åº§ä½ã€‚`);
    }

    closeHint();
  }

  // ç¡®è®¤å–æ¶ˆé¢„çº¦
  function confirmCancelReservation(seatId) {
    // æ›´æ–°åº§ä½çŠ¶æ€
    if (selectedSeat) {
      selectedSeat.classList.remove('booked-by-me');
      selectedSeat.classList.add('available');
      selectedSeat.dataset.status = 'available';
      selectedSeat.dataset.userId = '';
      selectedSeat.dataset.bookedTime = '';

      // æ›´æ–°åº§ä½æ•°æ®
      const seatIndex = seatData[selectedArea].findIndex(seat => seat.seat === seatId);
      if (seatIndex !== -1) {
        seatData[selectedArea][seatIndex].status = 'available';
        seatData[selectedArea][seatIndex].userId = null;
        seatData[selectedArea][seatIndex].bookedTime = null;
      }

      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      reserveBtn.disabled = false;
      cancelBtn.disabled = true;
      reserveBtn.textContent = 'é¢„çº¦åº§ä½';

      // æ›´æ–°åº§ä½è¯¦æƒ…
      updateSeatDetails(seatData[selectedArea][seatIndex]);

      // æ›´æ–°å¯ç”¨åº§ä½æ•°
      updateAvailableSeatsCount();

      // æ˜¾ç¤ºæˆåŠŸæç¤º
      showHint('å–æ¶ˆæˆåŠŸ', `åº§ä½ ${seatId} çš„é¢„çº¦å·²å–æ¶ˆã€‚`);
    }

    closeHint();
  }

  // æ˜¾ç¤ºæç¤º
  function showHint(title, message) {
    hintTitle.textContent = title;
    hintMessage.textContent = message;

    // æ›´æ–°ç¡®è®¤æŒ‰é’®äº‹ä»¶
    const confirmBtn = hintContainer.querySelector('.hint-btn-primary');
    confirmBtn.onclick = closeHint;

    hintContainer.classList.add('active');
  }

  // å…³é—­æç¤º
  function closeHint() {
    hintContainer.classList.remove('active');
  }

  // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
  document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
