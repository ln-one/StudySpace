<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>StudySpace 移动端</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 全局变量 */
        :root {
            --primary: #2d81ff;
            --primary-light: #f0f7ff;
            --success: #4cd964;
            --danger: #ff3b30;
            --warning: #ff9500;
            --text-main: #1d1d1f;
            --text-secondary: #6e6e73;
            --border: #e5e5e7;
            --bg-light: #f5f5f7;
            --bg-white: #fff;
            --radius-md: 16px;
            --radius-lg: 24px;
            --shadow-sm: 0 2px 20px rgba(0,0,0,0.06);
            --shadow-md: 0 8px 32px rgba(0,0,0,0.12);
            --shadow-lg: 0 12px 48px rgba(0,0,0,0.18);
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(229, 229, 231, 0.5);
            --glass-blur: blur(20px);
            --color-border-secondary: rgba(229, 229, 231, 0.5);
        }

        /* 基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background: radial-gradient(circle at 18% 22%, rgba(0, 122, 255, 0.12), transparent 34%),
            radial-gradient(circle at 78% 18%, rgba(90, 200, 250, 0.12), transparent 36%),
            radial-gradient(circle at 50% 82%, rgba(0, 122, 255, 0.08), transparent 38%),
            linear-gradient(180deg, #F2F3F7 0%, #E7E9F2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-main);
            position: relative;
            padding: 20px;
        }

        /* 页面容器 */
        .page {
            width: min(430px, 100%);
            height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        /* 应用主容器 - 手机形状 */
        .app-container {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid var(--color-border-secondary);
            border-radius: 46px;
            padding: 18px 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* 状态栏 */
        .status-bar {
            height: 44px;
            background: var(--bg-white);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-main);
            border-bottom: 1px solid var(--border);
            position: relative;
            z-index: 1000;
        }

        .status-bar__time {
            font-weight: 600;
        }

        .status-bar__icons {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .status-bar__icons i {
            font-size: 14px;
            color: var(--text-main);
        }

        /* 顶部导航栏 */
        .top-bar {
            height: 56px;
            background: var(--bg-white);
            display: flex;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 900;
            box-shadow: 0 2px 10px rgba(0,0,0,0.04);
        }

        .top-bar__back {
            font-size: 24px;
            color: var(--text-main);
            cursor: pointer;
            display: none;
            width: 40px;
            height: 40px;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            transition: all 0.2s;
            margin-right: 12px;
        }

        .top-bar__back.active {
            display: flex;
        }

        .top-bar__back:hover {
            background: var(--bg-light);
        }

        .top-bar__avatar {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--primary), #64b5ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            border: 2px solid white;
            box-shadow: 0 4px 12px rgba(45, 129, 255, 0.15);
        }

        .top-bar__avatar:hover {
            transform: scale(1.05);
        }

        .top-bar__title {
            flex: 1;
            text-align: center;
            font-size: 18px;
            font-weight: 700;
            margin: 0 12px;
            color: var(--text-main);
        }

        /* 主内容区 */
        .main-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
        }

        .main-content::-webkit-scrollbar {
            display: none;
        }

        /* 模块容器 */
        .module {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease-out;
            min-height: 100%;
        }

        .module.active {
            display: block;
        }

        /* 通用组件 */
        .card {
            background: var(--glass-bg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.3s;
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn {
            height: 56px;
            padding: 0 28px;
            border-radius: var(--radius-md);
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .btn:active::after {
            width: 200px;
            height: 200px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 6px 20px rgba(45, 129, 255, 0.2);
        }

        .btn-primary:hover {
            opacity: 0.95;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(45, 129, 255, 0.25);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-text {
            background: transparent;
            color: var(--text-secondary);
            border: 1.5px solid var(--border);
        }

        .btn-text:hover {
            background: var(--bg-light);
            border-color: var(--text-secondary);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 8px;
            padding-left: 4px;
        }

        .input {
            width: 100%;
            height: 52px;
            padding: 0 20px;
            border: 1.5px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 16px;
            background: var(--bg-white);
            transition: all 0.3s;
        }

        .input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(45, 129, 255, 0.1);
        }

        .input::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }

        /* 番茄钟模块 */
        .pomodoro__stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 24px;
            text-align: center;
            gap: 12px;
        }

        .stat-item {
            flex: 1;
            padding: 20px;
            background: var(--glass-bg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
        }

        .stat-item__value {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 4px;
            background: linear-gradient(135deg, var(--primary), #64b5ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-item__label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .pomodoro__clock-card {
            text-align: center;
            margin-bottom: 24px;
        }

        .pomodoro__task {
            font-size: 16px;
            color: var(--text-main);
            margin-bottom: 24px;
            padding: 14px 24px;
            background: var(--primary-light);
            border-radius: var(--radius-md);
            display: inline-block;
            font-weight: 600;
            border: 1px solid rgba(45, 129, 255, 0.2);
        }

        .pomodoro__clock-container {
            width: 240px;
            height: 240px;
            margin: 0 auto 28px;
            position: relative;
        }

        .pomodoro__clock-circle {
            width: 100%;
            height: 100%;
            border: 8px solid var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary-light) 0%, white 100%);
        }

        .pomodoro__clock-circle.running {
            border-color: var(--success);
            animation: pulse 2s infinite;
        }

        .pomodoro__clock {
            font-size: 48px;
            font-weight: 300;
            position: relative;
            z-index: 2;
            font-variant-numeric: tabular-nums;
            letter-spacing: 2px;
        }

        .pomodoro__time-settings {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin: 20px 0;
            align-items: center;
        }

        .time-setting-label {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .time-input {
            width: 70px;
            height: 44px;
            padding: 0 12px;
            border: 1.5px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            background: var(--bg-white);
        }

        .time-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(45, 129, 255, 0.1);
        }

        .pomodoro__btn-group {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 24px;
        }

        /* 任务列表 */
        .task-section {
            margin-top: 28px;
        }

        .task-section__title {
            font-size: 17px;
            font-weight: 700;
            margin: 0 0 16px 4px;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .task-section__title i {
            color: var(--primary);
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .task-item:hover {
            background: var(--bg-light);
            padding-left: 16px;
            padding-right: 16px;
            margin: 0 -16px;
            border-radius: var(--radius-md);
        }

        .task-item.completed {
            opacity: 0.8;
        }

        .task-item.completed .task-item__name {
            text-decoration: line-through;
            color: var(--text-secondary);
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-item__name {
            font-size: 16px;
            font-weight: 500;
            flex: 1;
        }

        .task-item__status {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--border);
            margin-right: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .task-item.completed .task-item__status {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .task-item__status i {
            font-size: 12px;
            display: none;
        }

        .task-item.completed .task-item__status i {
            display: block;
        }

        .task-item__action {
            color: var(--primary);
            font-size: 14px;
            padding: 8px 20px;
            border-radius: 20px;
            background: var(--primary-light);
            transition: all 0.2s;
            font-weight: 600;
            border: 1px solid rgba(45, 129, 255, 0.2);
        }

        .task-item__action:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(45, 129, 255, 0.15);
        }

        /* 座位预约模块 */
        .reserve-card {
            padding: 24px;
        }

        .date-picker {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
        }

        .date-picker::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, var(--primary), #64b5ff);
        }

        .date-picker__date {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        .date-picker__nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
        }

        .date-picker__btn {
            width: 44px;
            height: 44px;
            border-radius: 22px;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: var(--bg-white);
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .date-picker__btn:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .time-picker {
            margin-bottom: 28px;
        }

        .time-picker__title {
            font-size: 17px;
            color: var(--text-main);
            margin-bottom: 16px;
            font-weight: 700;
            padding-left: 4px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .time-picker__title i {
            color: var(--primary);
        }

        .time-picker__item {
            display: flex;
            align-items: center;
            padding: 20px;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--bg-white);
            position: relative;
            overflow: hidden;
        }

        .time-picker__item:hover {
            background: var(--bg-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .time-picker__item.selected {
            background: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }

        .time-picker__item.selected::before {
            content: "✓";
            margin-right: 16px;
            font-weight: bold;
            font-size: 18px;
        }

        .time-picker__item-time {
            font-size: 17px;
            font-weight: 600;
            min-width: 130px;
        }

        .time-picker__item-desc {
            font-size: 15px;
            color: var(--text-secondary);
        }

        .location-select {
            display: flex;
            gap: 16px;
            margin-bottom: 28px;
        }

        .location-select__item {
            flex: 1;
            position: relative;
        }

        .location-select__item label {
            display: block;
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            padding-left: 4px;
            font-weight: 500;
        }

        .location-select__item select {
            width: 100%;
            height: 52px;
            padding: 0 20px;
            border: 1.5px solid var(--border);
            border-radius: var(--radius-md);
            background: var(--bg-white);
            font-size: 16px;
            font-weight: 600;
            color: var(--text-main);
            cursor: pointer;
            appearance: none;
            padding-right: 50px;
            transition: all 0.2s;
        }

        .location-select__item select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(45, 129, 255, 0.1);
        }

        .location-select__item::after {
            content: "▼";
            position: absolute;
            right: 20px;
            bottom: 16px;
            color: var(--text-secondary);
            font-size: 12px;
            pointer-events: none;
            transition: transform 0.2s;
        }

        /* 座位选择区域 - 增强颜色对比 */
        .seat-selection {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin: 28px 0;
            position: relative;
            overflow: hidden;
        }

        .seat-selection::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, transparent, var(--primary), transparent);
        }

        .seat-map-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .seat-map {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .seat {
            aspect-ratio: 1;
            border-radius: var(--radius-md);
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .seat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: currentColor;
            opacity: 0.1;
            z-index: 1;
        }

        .seat:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        /* 改进座位颜色区分 - 增强对比 */
        .seat.available {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            color: #2d81ff;
            border-color: #2d81ff;
            border-width: 2px;
        }

        .seat.selected {
            background: linear-gradient(135deg, #2d81ff 0%, #4d9eff 100%);
            color: white;
            border-color: #2d81ff;
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 8px 24px rgba(45, 129, 255, 0.3);
            z-index: 2;
        }

        .seat.booked {
            background: linear-gradient(135deg, #ffd591 0%, #ffc069 100%);
            border-color: #ffa726;
            color: #e65100;
            cursor: not-allowed;
            border-width: 2px;
        }

        .seat.using {
            background: linear-gradient(135deg, #b7eb8f 0%, #95de64 100%);
            border-color: #73d13d;
            color: #237804;
            cursor: not-allowed;
            border-width: 2px;
        }

        .seat.unavailable {
            background: linear-gradient(135deg, #f5f5f7 0%, #e8e8ed 100%);
            border-color: #d1d1d6;
            color: #8e8e93;
            cursor: not-allowed;
            border-width: 2px;
        }

        .seat-legends {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-top: 24px;
            justify-content: center;
        }

        .seat-legend {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
            padding: 8px 16px;
            background: var(--bg-white);
            border-radius: 20px;
            border: 1px solid var(--border);
        }

        .seat-legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            border: 2px solid rgba(0,0,0,0.1);
        }

        .reserve__btn-group {
            display: flex;
            gap: 16px;
            margin-top: 32px;
        }

        .reserve__btn-group .btn {
            flex: 1;
        }

        /* 设置模块 */
        .profile-card {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 24px;
            margin-bottom: 24px;
            background: var(--glass-bg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, var(--primary), #64b5ff);
        }

        .profile-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .profile__avatar {
            width: 70px;
            height: 70px;
            border-radius: 35px;
            background: linear-gradient(135deg, var(--primary), #64b5ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            font-weight: 600;
            flex-shrink: 0;
            border: 3px solid white;
            box-shadow: 0 6px 20px rgba(45, 129, 255, 0.15);
        }

        .profile__info {
            flex: 1;
        }

        .profile__name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .profile__id {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .profile__arrow {
            color: var(--text-secondary);
            font-size: 24px;
            transition: transform 0.2s;
        }

        .profile-card:hover .profile__arrow {
            transform: translateX(6px);
            color: var(--primary);
        }

        .settings-group__title {
            font-size: 16px;
            color: var(--text-secondary);
            margin: 28px 0 16px;
            padding-left: 8px;
            font-weight: 600;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .settings-group__title i {
            color: var(--primary);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
            padding: 0 24px;
            background: var(--bg-white);
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .setting-item:hover {
            background: var(--bg-light);
            padding-left: 28px;
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-item__right {
            display: flex;
            align-items: center;
            gap: 16px;
            color: var(--text-secondary);
        }

        .switch {
            position: relative;
            width: 52px;
            height: 28px;
            border-radius: 14px;
            background: var(--border);
            cursor: pointer;
            transition: all 0.3s;
        }

        .switch::after {
            content: "";
            position: absolute;
            top: 2px;
            left: 2px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            transition: left 0.3s;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .switch.active {
            background: var(--primary);
        }

        .switch.active::after {
            left: 26px;
        }

        /* 我的预约列表样式 */
        .reservation-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .reservation-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border);
            transition: all 0.2s;
            cursor: pointer;
        }

        .reservation-item:hover {
            background: var(--bg-light);
        }

        .reservation-item:last-child {
            border-bottom: none;
        }

        .reservation-info {
            flex: 1;
        }

        .reservation-seat {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 4px;
        }

        .reservation-details {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .reservation-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-confirmed {
            background: var(--primary-light);
            color: var(--primary);
        }

        .status-completed {
            background: var(--success);
            color: white;
        }

        .status-cancelled {
            background: var(--danger);
            color: white;
        }

        /* 底部导航栏 */
        .bottom-nav {
            height: 76px;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-top: 1px solid var(--glass-border);
            display: flex;
            z-index: 1000;
            padding: 10px;
            position: relative;
            flex-shrink: 0;
        }

        .bottom-nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, transparent, var(--primary), transparent);
            opacity: 0.3;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            border-radius: var(--radius-md);
        }

        .nav-item:hover {
            background: var(--bg-light);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item__icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 14px;
            transition: all 0.3s;
            font-size: 22px;
            position: relative;
            z-index: 1;
        }

        .nav-item.active .nav-item__icon {
            background: linear-gradient(135deg, var(--primary), #64b5ff);
            color: white;
            transform: translateY(-12px);
            box-shadow: 0 10px 28px rgba(45, 129, 255, 0.25);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 32px;
            height: 4px;
            background: var(--primary);
            border-radius: 2px;
        }

        /* 手机风格弹窗 */
        .mobile-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease-out;
        }

        .mobile-modal.active {
            display: flex;
        }

        .mobile-modal__content {
            width: 90%;
            max-width: 340px;
            background: var(--bg-white);
            border-radius: 28px;
            padding: 0;
            animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        .mobile-modal__header {
            padding: 28px 24px 20px;
            text-align: center;
            border-bottom: 1px solid var(--border);
            position: relative;
        }

        .mobile-modal__title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 8px;
        }

        .mobile-modal__subtitle {
            font-size: 15px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .mobile-modal__body {
            padding: 24px;
            font-size: 16px;
            color: var(--text-secondary);
            line-height: 1.6;
            text-align: center;
        }

        .mobile-modal__body.details {
            text-align: left;
        }

        .mobile-modal__detail-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .mobile-modal__detail-item:last-child {
            border-bottom: none;
        }

        .mobile-modal__detail-label {
            font-weight: 600;
            color: var(--text-main);
        }

        .mobile-modal__detail-value {
            color: var(--text-secondary);
        }

        .mobile-modal__footer {
            padding: 20px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
        }

        .mobile-modal__footer .btn {
            flex: 1;
            height: 52px;
        }

        .mobile-modal__close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            z-index: 1;
            background: var(--bg-light);
        }

        .mobile-modal__close:hover {
            background: var(--primary);
            color: white;
            transform: rotate(90deg);
        }

        /* 手机风格通知 */
        .mobile-notification {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            z-index: 3000;
            display: none;
            width: 90%;
            max-width: 360px;
            animation: notificationSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .mobile-notification.active {
            display: block;
        }

        .mobile-notification__header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .mobile-notification__icon {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }

        .mobile-notification__icon--success {
            background: linear-gradient(135deg, var(--success), #6bdb80);
        }

        .mobile-notification__icon--error {
            background: linear-gradient(135deg, var(--danger), #ff5a4d);
        }

        .mobile-notification__icon--info {
            background: linear-gradient(135deg, var(--primary), #64b5ff);
        }

        .mobile-notification__title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-main);
            flex: 1;
        }

        .mobile-notification__message {
            font-size: 15px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .mobile-notification__close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            background: var(--bg-light);
        }

        .mobile-notification__close:hover {
            background: var(--primary);
            color: white;
        }

        /* 动画 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes notificationSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -20px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0.4); }
            70% { box-shadow: 0 0 0 12px rgba(76, 217, 100, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0); }
        }

        /* 响应式调整 */
        @media (max-width: 380px) {
            .page {
                height: calc(100vh - 20px);
            }

            .app-container {
                padding: 14px 12px;
                border-radius: 36px;
            }

            .pomodoro__clock-container {
                width: 220px;
                height: 220px;
            }

            .pomodoro__clock {
                font-size: 44px;
            }

            .seat-map {
                grid-template-columns: repeat(5, 1fr);
            }

            .time-input {
                width: 60px;
            }

            .bottom-nav {
                height: 70px;
                padding: 8px;
            }

            .nav-item__icon {
                width: 44px;
                height: 44px;
                font-size: 20px;
            }

            .reservation-item {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
<!-- 页面容器 -->
<div class="page">
    <!-- 应用主容器 - 手机形状 -->
    <div class="app-container">
        <!-- 状态栏 -->
        <div class="status-bar">
            <div class="status-bar__time" id="currentTime">14:30</div>
            <div class="status-bar__icons">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-three-quarters"></i>
            </div>
        </div>

        <!-- 顶部导航栏 -->
        <div class="top-bar">
            <div class="top-bar__back" id="topBack">←</div>
            <div class="top-bar__avatar" id="topAvatar">用</div>
            <div class="top-bar__title" id="topTitle">番茄钟</div>
        </div>

        <!-- 主内容区 -->
        <div class="main-content">
            <!-- 番茄钟模块 -->
            <div class="module active" id="modulePomodoro">
                <!-- 统计区域 -->
                <div class="pomodoro__stat">
                    <div class="stat-item">
                        <div class="stat-item__value" id="completedCount">3</div>
                        <div class="stat-item__label">已完成番茄</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item__value" id="todayMinutes">120</div>
                        <div class="stat-item__label">今日学习时长(分钟)</div>
                    </div>
                </div>

                <!-- 时钟卡片 -->
                <div class="card pomodoro__clock-card">
                    <div class="pomodoro__task" id="currentTask">当前任务：未选择任务</div>
                    <div class="pomodoro__clock-container">
                        <div class="pomodoro__clock-circle" id="pomodoroClockCircle">
                            <div class="pomodoro__clock" id="pomodoroClock">25:00</div>
                        </div>
                    </div>

                    <!-- 时间设置 -->
                    <div class="pomodoro__time-settings">
                        <div class="time-setting-label">专注时长：</div>
                        <input type="number" class="time-input" id="pomodoroMinutes" min="1" max="60" value="25">
                        <div class="time-setting-label">分钟</div>
                        <button class="btn btn-text" id="btnSetTime">
                            <i class="fas fa-cog"></i>设置
                        </button>
                    </div>

                    <div class="pomodoro__btn-group">
                        <button class="btn btn-primary" id="btnPomodoroStart">
                            <i class="fas fa-play"></i>开始专注
                        </button>
                        <button class="btn btn-text" id="btnPomodoroPause" style="display: none;">
                            <i class="fas fa-pause"></i>暂停
                        </button>
                        <button class="btn btn-text" id="btnPomodoroReset">
                            <i class="fas fa-redo"></i>重置
                        </button>
                    </div>
                </div>

                <!-- 任务区域 -->
                <div class="task-section">
                    <div class="task-section__title">
                        <i class="fas fa-tasks"></i>选择/添加任务
                    </div>
                    <div class="input-group">
                        <input type="text" class="input" id="taskInput" placeholder="输入新任务名称">
                    </div>
                    <button class="btn btn-primary" style="width: 100%; margin-bottom: 24px;" id="btnAddTask">
                        <i class="fas fa-plus"></i>添加任务
                    </button>

                    <div class="card">
                        <div class="task-item" data-task="完成作业">
                            <div class="task-item__status"><i class="fas fa-check"></i></div>
                            <div class="task-item__name">完成作业</div>
                            <div class="task-item__action" onclick="selectTask(this)">选择</div>
                        </div>
                        <div class="task-item" data-task="复习知识点">
                            <div class="task-item__status"><i class="fas fa-check"></i></div>
                            <div class="task-item__name">复习知识点</div>
                            <div class="task-item__action" onclick="selectTask(this)">选择</div>
                        </div>
                        <div class="task-item" data-task="阅读书籍">
                            <div class="task-item__status"><i class="fas fa-check"></i></div>
                            <div class="task-item__name">阅读书籍</div>
                            <div class="task-item__action" onclick="selectTask(this)">选择</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 座位预约模块 -->
            <div class="module" id="moduleReserve">
                <div class="card reserve-card">
                    <!-- 日期选择 -->
                    <div class="date-picker">
                        <div class="date-picker__date" id="currentDate">2025/12/08</div>
                        <div class="date-picker__nav">
                            <div class="date-picker__btn" id="datePrev">
                                <i class="fas fa-chevron-left"></i>
                            </div>
                            <div style="font-size: 15px; color: var(--text-secondary);">选择日期</div>
                            <div class="date-picker__btn" id="dateNext">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </div>
                    </div>

                    <!-- 时间选择 -->
                    <div class="time-picker">
                        <div class="time-picker__title">
                            <i class="far fa-clock"></i>选择具体时间
                        </div>
                        <div class="time-picker__item" data-time="08:00-12:00">
                            <div class="time-picker__item-time">08:00-12:00</div>
                            <div class="time-picker__item-desc">上午时段</div>
                        </div>
                        <div class="time-picker__item" data-time="12:00-16:00">
                            <div class="time-picker__item-time">12:00-16:00</div>
                            <div class="time-picker__item-desc">下午时段</div>
                        </div>
                        <div class="time-picker__item" data-time="16:00-20:00">
                            <div class="time-picker__item-time">16:00-20:00</div>
                            <div class="time-picker__item-desc">傍晚时段</div>
                        </div>
                        <div class="time-picker__item" data-time="20:00-24:00">
                            <div class="time-picker__item-time">20:00-24:00</div>
                            <div class="time-picker__item-desc">夜间时段</div>
                        </div>
                    </div>

                    <!-- 楼层和区域选择 -->
                    <div class="location-select">
                        <div class="location-select__item">
                            <label for="floorSelect">楼层</label>
                            <select id="floorSelect">
                                <option value="1">楼层 1</option>
                                <option value="2" selected>楼层 2</option>
                                <option value="3">楼层 3</option>
                            </select>
                        </div>
                        <div class="location-select__item">
                            <label for="areaSelect">区域</label>
                            <select id="areaSelect">
                                <option value="A">区域 A</option>
                                <option value="B">区域 B</option>
                                <option value="C" selected>区域 C</option>
                                <option value="D">区域 D</option>
                            </select>
                        </div>
                    </div>

                    <!-- 座位选择区域 -->
                    <div class="seat-selection">
                        <div class="seat-map-title">
                            <i class="fas fa-chair"></i>选择座位
                        </div>
                        <div class="seat-map" id="seatMap"></div>

                        <div class="seat-legends">
                            <div class="seat-legend">
                                <div class="seat-legend-color" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border-color: #2d81ff;"></div>
                                <span>可用</span>
                            </div>
                            <div class="seat-legend">
                                <div class="seat-legend-color" style="background: linear-gradient(135deg, #ffd591 0%, #ffc069 100%); border-color: #ffa726;"></div>
                                <span>已预约</span>
                            </div>
                            <div class="seat-legend">
                                <div class="seat-legend-color" style="background: linear-gradient(135deg, #b7eb8f 0%, #95de64 100%); border-color: #73d13d;"></div>
                                <span>使用中</span>
                            </div>
                            <div class="seat-legend">
                                <div class="seat-legend-color" style="background: linear-gradient(135deg, #f5f5f7 0%, #e8e8ed 100%); border-color: #d1d1d6;"></div>
                                <span>不可用</span>
                            </div>
                            <div class="seat-legend">
                                <div class="seat-legend-color" style="background: linear-gradient(135deg, #2d81ff 0%, #4d9eff 100%); border-color: #2d81ff;"></div>
                                <span>已选中</span>
                            </div>
                        </div>
                    </div>

                    <div class="reserve__btn-group">
                        <button class="btn btn-text" id="btnMyReserve">
                            <i class="fas fa-list"></i>我的预约
                        </button>
                        <button class="btn btn-primary" id="btnReserve">
                            <i class="fas fa-check"></i>预约
                        </button>
                    </div>
                </div>
            </div>

            <!-- 任务模块（跳转入口） -->
            <div class="module" id="moduleTask">
                <div class="card" style="height: 100%; display: flex; align-items: center; justify-content: center; text-align: center;">
                    <div>
                        <i class="fas fa-tasks" style="font-size: 64px; margin-bottom: 24px; color: var(--primary-light); display: block;"></i>
                        <div style="font-size: 20px; margin-bottom: 12px; font-weight: 700;">回到任务清单</div>
                        <div style="font-size: 15px; color: var(--text-secondary); opacity: 0.7;">与番茄钟同步的任务视图</div>
                        <div style="margin-top: 18px; display: flex; justify-content: center;">
                            <a class="btn btn-primary" style="text-decoration: none;" href="移动用户端-任务.html">
                                <i class="fas fa-arrow-right"></i> 前往任务页
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 日历模块（跳转入口） -->
            <div class="module" id="moduleCalendar">
                <div class="card" style="height: 100%; display: flex; align-items: center; justify-content: center; text-align: center;">
                    <div>
                        <i class="fas fa-calendar-alt" style="font-size: 64px; margin-bottom: 24px; color: var(--primary-light); display: block;"></i>
                        <div style="font-size: 20px; margin-bottom: 12px; font-weight: 700;">查看周视图</div>
                        <div style="font-size: 15px; color: var(--text-secondary); opacity: 0.7;">保持与任务/预约的互跳</div>
                        <div style="margin-top: 18px; display: flex; justify-content: center;">
                            <a class="btn btn-primary" style="text-decoration: none;" href="移动端用户端-日历.html">
                                <i class="fas fa-calendar-day"></i> 打开日历
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 设置模块 -->
            <div class="module" id="moduleSettings">
                <div class="profile-card" onclick="showProfileModal()">
                    <div class="profile__avatar">用</div>
                    <div class="profile__info">
                        <div class="profile__name">StudyUser123</div>
                        <div class="profile__id">ID: 887654321</div>
                    </div>
                    <div class="profile__arrow">→</div>
                </div>

                <div class="settings-group__title">
                    <i class="fas fa-graduation-cap"></i>学习偏好
                </div>
                <div class="card">
                    <div class="setting-item">
                        <span>番茄钟时长</span>
                        <div class="setting-item__right">25分钟</div>
                    </div>
                    <div class="setting-item">
                        <span>休息时长</span>
                        <div class="setting-item__right">5分钟</div>
                    </div>
                    <div class="setting-item">
                        <span>自动开始休息</span>
                        <div class="setting-item__right">
                            <div class="switch active" id="autoRestSwitch"></div>
                        </div>
                    </div>
                </div>

                <div class="settings-group__title">
                    <i class="fas fa-bell"></i>通知设置
                </div>
                <div class="card">
                    <div class="setting-item">
                        <span>预约提醒</span>
                        <div class="setting-item__right">
                            <div class="switch active" id="reserveReminderSwitch"></div>
                        </div>
                    </div>
                    <div class="setting-item">
                        <span>番茄钟结束提醒</span>
                        <div class="setting-item__right">
                            <div class="switch active" id="pomodoroReminderSwitch"></div>
                        </div>
                    </div>
                    <div class="setting-item">
                        <span>系统公告通知</span>
                        <div class="setting-item__right">
                            <div class="switch" id="announcementSwitch"></div>
                        </div>
                    </div>
                </div>

                <div class="settings-group__title">
                    <i class="fas fa-user-shield"></i>账号与安全
                </div>
                <div class="card">
                    <div class="setting-item" onclick="showChangePasswordModal()">
                        <span>修改密码</span>
                        <div class="setting-item__right">→</div>
                    </div>
                    <div class="setting-item" onclick="showBindPhoneModal()">
                        <span>绑定手机号</span>
                        <div class="setting-item__right">未绑定 →</div>
                    </div>
                    <div class="setting-item" onclick="showLogoutModal()">
                        <span>退出登录</span>
                        <div class="setting-item__right">→</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部导航栏 -->
        <div class="bottom-nav" id="bottomNav">
            <div class="nav-item" data-module="moduleTask">
                <div class="nav-item__icon"><i class="fas fa-clipboard-list"></i></div>
                <div>任务</div>
            </div>
            <div class="nav-item" data-module="moduleCalendar">
                <div class="nav-item__icon"><i class="fas fa-calendar-day"></i></div>
                <div>日历</div>
            </div>
            <div class="nav-item active" data-module="modulePomodoro">
                <div class="nav-item__icon"><i class="fas fa-clock"></i></div>
                <div>番茄钟</div>
            </div>
            <div class="nav-item" data-module="moduleReserve">
                <div class="nav-item__icon"><i class="fas fa-couch"></i></div>
                <div>座位预约</div>
            </div>
        </div>
    </div>
</div>

<!-- 手机风格弹窗 -->
<div class="mobile-modal" id="mobileModal">
    <div class="mobile-modal__content">
        <div class="mobile-modal__close" onclick="closeMobileModal()">×</div>
        <div class="mobile-modal__header">
            <div class="mobile-modal__title" id="mobileModalTitle">标题</div>
            <div class="mobile-modal__subtitle" id="mobileModalSubtitle"></div>
        </div>
        <div class="mobile-modal__body" id="mobileModalBody">
            内容
        </div>
        <div class="mobile-modal__footer" id="mobileModalFooter">
            <button class="btn btn-text" onclick="closeMobileModal()">取消</button>
            <button class="btn btn-primary" onclick="confirmMobileModal()">确定</button>
        </div>
    </div>
</div>

<!-- 手机风格通知 -->
<div class="mobile-notification" id="mobileNotification">
    <div class="mobile-notification__close" onclick="closeNotification()">×</div>
    <div class="mobile-notification__header">
    <div class="mobile-notification__icon mobile-notification__icon--info" id="notificationIcon">
        <i class="fas fa-info-circle"></i>
        </div>
        <div class="mobile-notification__title" id="notificationTitle">通知标题</div>
    </div>
    <div class="mobile-notification__message" id="notificationMessage">
        通知内容
    </div>
</div>

<script>
    // -------------------------- 通用工具函数 --------------------------
    // 更新当前时间
    function updateCurrentTime() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
        document.getElementById('currentTime').textContent = timeStr;
    }

    // 初始更新时间
    updateCurrentTime();

    // 每秒更新时间
    setInterval(updateCurrentTime, 60000);

    // -------------------------- 模块切换逻辑 --------------------------
    const navItems = document.querySelectorAll('.nav-item');
    const modules = document.querySelectorAll('.module');
    const topTitle = document.getElementById('topTitle');
    const topAvatar = document.getElementById('topAvatar');
    const topBack = document.getElementById('topBack');
    const bottomNav = document.getElementById('bottomNav');
    let moduleHistory = ['modulePomodoro'];

    // 底部导航切换模块
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            const targetModule = item.dataset.module;
            switchModule(targetModule);
        });
    });

    // 头像点击进入设置
    topAvatar.addEventListener('click', () => {
        switchModule('moduleSettings');
    });

    // 返回按钮逻辑
    topBack.addEventListener('click', () => {
        if (moduleHistory.length > 1) {
            moduleHistory.pop();
            const prevModule = moduleHistory[moduleHistory.length - 1];
            switchModule(prevModule);
        }
    });

    // 切换模块核心函数
    function switchModule(targetModule) {
        navItems.forEach(i => i.classList.remove('active'));
        const navItem = document.querySelector(`.nav-item[data-module="${targetModule}"]`);
        if (navItem) navItem.classList.add('active');

        modules.forEach(m => m.classList.remove('active'));
        document.getElementById(targetModule).classList.add('active');

        const titleMap = {
            modulePomodoro: '番茄钟',
            moduleReserve: '座位预约',
            moduleTask: '任务',
            moduleCalendar: '日历',
            moduleSettings: '我的设置'
        };
        topTitle.textContent = titleMap[targetModule] || 'StudySpace';

        if (moduleHistory[moduleHistory.length - 1] !== targetModule) {
            moduleHistory.push(targetModule);
        }

        // 设置页特殊处理：显示返回按钮，隐藏头像，隐藏底部导航栏
        if (targetModule === 'moduleSettings') {
            topBack.style.display = 'flex';
            topAvatar.style.display = 'none';
            bottomNav.style.display = 'none';
        } else {
            // 其他页面：隐藏返回按钮，显示头像，显示底部导航栏
            topBack.style.display = 'none';
            topAvatar.style.display = 'flex';
            bottomNav.style.display = 'flex';
        }
    }

    // -------------------------- 番茄钟逻辑 --------------------------
    let pomodoroTimer = null;
    let remainingTime = 25 * 60; // 25分钟（秒）
    let isRunning = false;
    let currentPomodoroDuration = 25; // 当前设置的番茄钟时长（分钟）
    let currentSelectedTask = null;

    const pomodoroClock = document.getElementById('pomodoroClock');
    const pomodoroClockCircle = document.getElementById('pomodoroClockCircle');
    const btnPomodoroStart = document.getElementById('btnPomodoroStart');
    const btnPomodoroPause = document.getElementById('btnPomodoroPause');
    const btnPomodoroReset = document.getElementById('btnPomodoroReset');
    const btnSetTime = document.getElementById('btnSetTime');
    const pomodoroMinutesInput = document.getElementById('pomodoroMinutes');
    const currentTask = document.getElementById('currentTask');
    const taskInput = document.getElementById('taskInput');
    const btnAddTask = document.getElementById('btnAddTask');
    const completedCountEl = document.getElementById('completedCount');
    const todayMinutesEl = document.getElementById('todayMinutes');

    // 初始统计数据
    let completedCount = parseInt(completedCountEl.textContent);
    let todayMinutes = parseInt(todayMinutesEl.textContent);

    // 格式化时间显示
    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
        const secs = (seconds % 60).toString().padStart(2, '0');
        return `${mins}:${secs}`;
    }

    // 更新番茄钟显示
    function updatePomodoroDisplay() {
        pomodoroClock.textContent = formatTime(remainingTime);
    }

    // 设置番茄钟时长
    btnSetTime.addEventListener('click', () => {
        const minutes = parseInt(pomodoroMinutesInput.value);
        if (minutes < 1 || minutes > 60 || isNaN(minutes)) {
            showNotification('设置失败', '请输入1-60之间的有效分钟数', 'error');
            return;
        }

        currentPomodoroDuration = minutes;
        remainingTime = minutes * 60;
        updatePomodoroDisplay();
        showNotification('设置成功', `番茄钟时长已设置为 ${minutes} 分钟`, 'success');

        // 重置番茄钟状态
        if (isRunning) {
            clearInterval(pomodoroTimer);
            isRunning = false;
            btnPomodoroStart.style.display = 'inline-flex';
            btnPomodoroPause.style.display = 'none';
            pomodoroClockCircle.classList.remove('running');
        }
    });

    // 开始专注
    btnPomodoroStart.addEventListener('click', () => {
        if (currentTask.textContent === '当前任务：未选择任务') {
            showNotification('提示', '请先选择任务！', 'error');
            return;
        }

        isRunning = true;
        btnPomodoroStart.style.display = 'none';
        btnPomodoroPause.style.display = 'inline-flex';
        pomodoroClockCircle.classList.add('running');

        pomodoroTimer = setInterval(() => {
            remainingTime--;
            updatePomodoroDisplay();

            if (remainingTime <= 0) {
                clearInterval(pomodoroTimer);
                isRunning = false;
                btnPomodoroStart.style.display = 'inline-flex';
                btnPomodoroPause.style.display = 'none';
                pomodoroClockCircle.classList.remove('running');

                // 番茄钟完成后的处理
                onPomodoroComplete();
            }
        }, 1000);
    });

    // 番茄钟完成后的处理
    function onPomodoroComplete() {
        // 更新统计数据
        completedCount++;
        todayMinutes += currentPomodoroDuration;

        completedCountEl.textContent = completedCount;
        todayMinutesEl.textContent = todayMinutes;

        // 标记当前任务为完成
        if (currentSelectedTask) {
            markTaskAsCompleted(currentSelectedTask);
        }

        // 显示完成通知
        showNotification('专注完成', `恭喜！您已完成一个番茄钟（${currentPomodoroDuration}分钟）。\n\n已完成番茄：${completedCount}\n今日学习时长：${todayMinutes}分钟`, 'success');

        // 自动重置番茄钟
        setTimeout(() => {
            remainingTime = currentPomodoroDuration * 60;
            updatePomodoroDisplay();
        }, 1000);
    }

    // 标记任务为完成
    function markTaskAsCompleted(taskName) {
        const taskItems = document.querySelectorAll('.task-item');
        taskItems.forEach(item => {
            if (item.dataset.task === taskName) {
                item.classList.add('completed');
            }
        });
    }

    // 暂停专注
    btnPomodoroPause.addEventListener('click', () => {
        clearInterval(pomodoroTimer);
        isRunning = false;
        btnPomodoroPause.style.display = 'none';
        btnPomodoroStart.style.display = 'inline-flex';
        pomodoroClockCircle.classList.remove('running');
    });

    // 重置番茄钟
    btnPomodoroReset.addEventListener('click', () => {
        clearInterval(pomodoroTimer);
        isRunning = false;
        remainingTime = currentPomodoroDuration * 60;
        updatePomodoroDisplay();
        btnPomodoroStart.style.display = 'inline-flex';
        btnPomodoroPause.style.display = 'none';
        pomodoroClockCircle.classList.remove('running');
        showNotification('已重置', '番茄钟已重置', 'info');
    });

    // 选择任务
    function selectTask(el) {
        const taskItem = el.closest('.task-item');
        const taskName = taskItem.dataset.task;
        currentTask.textContent = `当前任务：${taskName}`;
        currentSelectedTask = taskName;
        showNotification('任务选择', `已选择任务：${taskName}`, 'info');
    }

    // 添加任务
    btnAddTask.addEventListener('click', () => {
        const taskName = taskInput.value.trim();
        if (!taskName) {
            showNotification('提示', '请输入任务名称！', 'error');
            return;
        }

        const taskList = document.querySelector('.task-section .card');
        const taskItem = document.createElement('div');
        taskItem.className = 'task-item';
        taskItem.dataset.task = taskName;
        taskItem.innerHTML = `
            <div class="task-item__status"><i class="fas fa-check"></i></div>
            <div class="task-item__name">${taskName}</div>
            <div class="task-item__action" onclick="selectTask(this)">选择</div>
        `;
        taskList.appendChild(taskItem);
        taskInput.value = '';
        showNotification('任务添加', `已添加任务：${taskName}`, 'success');
    });

    // -------------------------- 座位预约逻辑 --------------------------
    const seatMap = document.getElementById('seatMap');
    const btnReserve = document.getElementById('btnReserve');
    const btnMyReserve = document.getElementById('btnMyReserve');
    const timeItems = document.querySelectorAll('.time-picker__item');
    const floorSelect = document.getElementById('floorSelect');
    const areaSelect = document.getElementById('areaSelect');
    const currentDateEl = document.getElementById('currentDate');

    let selectedSeat = null;
    let selectedTime = '08:00-12:00';
    let currentDate = new Date(2025, 11, 8);
    let currentFloor = '2';
    let currentArea = 'C';

    // 我的预约数据
    let myReservations = [
        {
            id: 1,
            seatId: 'C10',
            floor: '2',
            area: 'C',
            date: '2025/12/07',
            time: '08:00-12:00',
            status: 'confirmed'
        },
        {
            id: 2,
            seatId: 'A12',
            floor: '1',
            area: 'A',
            date: '2025/12/06',
            time: '12:00-16:00',
            status: 'completed'
        },
        {
            id: 3,
            seatId: 'B08',
            floor: '2',
            area: 'B',
            date: '2025/12/05',
            time: '16:00-20:00',
            status: 'cancelled'
        }
    ];

    // 座位状态数据
    const seatStatusTemplate = [
        { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' },
        { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'booked' },
        { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' },
        { status: 'using' }, { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' },
        { status: 'booked' }, { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' },
        { status: 'unavailable' }, { status: 'available' }, { status: 'available' }, { status: 'available' }, { status: 'available' }
    ];

    // 时间选择器
    timeItems.forEach(item => {
        item.addEventListener('click', () => {
            timeItems.forEach(i => i.classList.remove('selected'));
            item.classList.add('selected');
            selectedTime = item.dataset.time;
        });
    });

    timeItems[0].classList.add('selected');

    // 更新日期显示
    function updateDateDisplay() {
        const year = currentDate.getFullYear();
        const month = (currentDate.getMonth() + 1).toString().padStart(2, '0');
        const day = currentDate.getDate().toString().padStart(2, '0');
        currentDateEl.textContent = `${year}/${month}/${day}`;
    }

    // 日期前进
    document.getElementById('dateNext').addEventListener('click', () => {
        currentDate.setDate(currentDate.getDate() + 1);
        updateDateDisplay();
        selectedSeat = null;
        generateSeatMap();
    });

    // 日期后退
    document.getElementById('datePrev').addEventListener('click', () => {
        currentDate.setDate(currentDate.getDate() - 1);
        updateDateDisplay();
        selectedSeat = null;
        generateSeatMap();
    });

    // 楼层选择
    floorSelect.addEventListener('change', () => {
        currentFloor = floorSelect.value;
        generateSeatMap();
        selectedSeat = null;
    });

    // 区域选择
    areaSelect.addEventListener('change', () => {
        currentArea = areaSelect.value;
        generateSeatMap();
        selectedSeat = null;
    });

    // 生成座位图
    function generateSeatMap() {
        seatMap.innerHTML = '';
        const areaPrefix = currentArea;

        seatStatusTemplate.forEach((seat, index) => {
            const seatNumber = (index + 1).toString().padStart(2, '0');
            const seatId = `${areaPrefix}${seatNumber}`;
            const seatElement = document.createElement('div');
            seatElement.className = `seat ${seat.status}`;
            seatElement.textContent = seatId;
            seatElement.dataset.id = seatId;
            seatElement.dataset.status = seat.status;

            seatElement.addEventListener('click', () => {
                if (seat.status === 'unavailable' || seat.status === 'booked' || seat.status === 'using') {
                    const message = seat.status === 'booked' ? '已被预约' :
                        seat.status === 'using' ? '正在使用中' : '不可用';
                    showNotification('座位不可用', `该座位${message}，请选择其他座位。`, 'error');
                    return;
                }

                if (selectedSeat) {
                    selectedSeat.classList.remove('selected');
                }
                seatElement.classList.add('selected');
                selectedSeat = seatElement;
            });

            seatMap.appendChild(seatElement);
        });
    }

    // 初始化座位图和日期
    generateSeatMap();
    updateDateDisplay();

    // 打开预约详情弹窗
    btnReserve.addEventListener('click', () => {
        if (!selectedSeat) {
            showNotification('提示', '请先选择座位！', 'error');
            return;
        }

        const seatId = selectedSeat.textContent;

        // 使用手机风格弹窗显示预约详情
        const modalTitle = '预约详情';
        const modalSubtitle = '请确认您的预约信息';
        const modalBody = `
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">日期：</span>
                <span class="mobile-modal__detail-value">${currentDateEl.textContent}</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">时间段：</span>
                <span class="mobile-modal__detail-value">${selectedTime}</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">楼层：</span>
                <span class="mobile-modal__detail-value">${currentFloor}楼</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">区域：</span>
                <span class="mobile-modal__detail-value">${currentArea}区</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">座位：</span>
                <span class="mobile-modal__detail-value">${seatId}</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">预约时长：</span>
                <span class="mobile-modal__detail-value">4小时</span>
            </div>
        `;

        document.getElementById('mobileModalTitle').textContent = modalTitle;
        document.getElementById('mobileModalSubtitle').textContent = modalSubtitle;
        document.getElementById('mobileModalBody').innerHTML = modalBody;
        document.getElementById('mobileModalBody').classList.add('details');

        // 设置弹窗按钮
        document.getElementById('mobileModalFooter').innerHTML = `
            <button class="btn btn-text" onclick="closeMobileModal()">取消</button>
            <button class="btn btn-primary" onclick="confirmReservation('${seatId}')">确认预约</button>
        `;

        document.getElementById('mobileModal').classList.add('active');
    });

    // 我的预约按钮
    btnMyReserve.addEventListener('click', () => {
        showMyReservations();
    });

    // 显示我的预约
    function showMyReservations() {
        const modalTitle = '我的预约';
        const modalSubtitle = `共有 ${myReservations.length} 条预约记录`;

        let modalBody = '<div class="reservation-list">';

        if (myReservations.length === 0) {
            modalBody += '<div style="text-align: center; padding: 40px 20px; color: var(--text-secondary);">暂无预约记录</div>';
        } else {
            myReservations.forEach(reservation => {
                const statusText = reservation.status === 'confirmed' ? '已确认' :
                    reservation.status === 'completed' ? '已完成' : '已取消';
                const statusClass = reservation.status === 'confirmed' ? 'status-confirmed' :
                    reservation.status === 'completed' ? 'status-completed' : 'status-cancelled';

                modalBody += `
                    <div class="reservation-item" onclick="showReservationDetail(${reservation.id})">
                        <div class="reservation-info">
                            <div class="reservation-seat">座位 ${reservation.seatId}</div>
                            <div class="reservation-details">
                                ${reservation.date} | ${reservation.time}<br>
                                楼层 ${reservation.floor} | 区域 ${reservation.area}
                            </div>
                        </div>
                        <div class="reservation-status ${statusClass}">${statusText}</div>
                    </div>
                `;
            });
        }

        modalBody += '</div>';

        document.getElementById('mobileModalTitle').textContent = modalTitle;
        document.getElementById('mobileModalSubtitle').textContent = modalSubtitle;
        document.getElementById('mobileModalBody').innerHTML = modalBody;
        document.getElementById('mobileModalBody').classList.remove('details');

        // 设置弹窗按钮
        document.getElementById('mobileModalFooter').innerHTML = `
            <button class="btn btn-primary" style="flex: 1;" onclick="closeMobileModal()">确定</button>
        `;

        document.getElementById('mobileModal').classList.add('active');
    }

    // 显示预约详情
    function showReservationDetail(reservationId) {
        const reservation = myReservations.find(r => r.id === reservationId);
        if (!reservation) return;

        const statusText = reservation.status === 'confirmed' ? '已确认' :
            reservation.status === 'completed' ? '已完成' : '已取消';

        const modalTitle = '预约详情';
        const modalSubtitle = '预约信息详情';
        const modalBody = `
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">座位号：</span>
                <span class="mobile-modal__detail-value">${reservation.seatId}</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">日期：</span>
                <span class="mobile-modal__detail-value">${reservation.date}</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">时间段：</span>
                <span class="mobile-modal__detail-value">${reservation.time}</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">楼层：</span>
                <span class="mobile-modal__detail-value">${reservation.floor}楼</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">区域：</span>
                <span class="mobile-modal__detail-value">${reservation.area}区</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">状态：</span>
                <span class="mobile-modal__detail-value">${statusText}</span>
            </div>
        `;

        document.getElementById('mobileModalTitle').textContent = modalTitle;
        document.getElementById('mobileModalSubtitle').textContent = modalSubtitle;
        document.getElementById('mobileModalBody').innerHTML = modalBody;
        document.getElementById('mobileModalBody').classList.add('details');

        // 设置弹窗按钮
        document.getElementById('mobileModalFooter').innerHTML = `
            <button class="btn btn-primary" style="flex: 1;" onclick="closeMobileModal()">确定</button>
        `;

        document.getElementById('mobileModal').classList.add('active');
    }

    // 确认预约
    function confirmReservation(seatId) {
        closeMobileModal();

        // 创建新的预约记录
        const newReservation = {
            id: myReservations.length + 1,
            seatId: seatId,
            floor: currentFloor,
            area: currentArea,
            date: currentDateEl.textContent,
            time: selectedTime,
            status: 'confirmed'
        };

        // 添加到我的预约列表
        myReservations.unshift(newReservation);

        // 更新座位状态
        if (selectedSeat) {
            selectedSeat.classList.remove('available', 'selected');
            selectedSeat.classList.add('booked');
            selectedSeat.dataset.status = 'booked';
            selectedSeat = null;
        }

        // 显示成功通知
        showNotification('预约成功', `座位：${seatId}\n楼层：${currentFloor}楼\n区域：${currentArea}区\n日期：${currentDateEl.textContent}\n时间段：${selectedTime}\n\n预约已添加到"我的预约"中`, 'success');
    }

    // -------------------------- 设置模块弹窗逻辑 --------------------------
    // 显示个人资料弹窗
    function showProfileModal() {
        document.getElementById('mobileModalTitle').textContent = '个人资料';
        document.getElementById('mobileModalSubtitle').textContent = '用户信息详情';
        document.getElementById('mobileModalBody').innerHTML = `
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">用户名：</span>
                <span class="mobile-modal__detail-value">StudyUser123</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">用户ID：</span>
                <span class="mobile-modal__detail-value">887654321</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">邮箱：</span>
                <span class="mobile-modal__detail-value">user@example.com</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">注册时间：</span>
                <span class="mobile-modal__detail-value">2025-10-01</span>
            </div>
            <div class="mobile-modal__detail-item">
                <span class="mobile-modal__detail-label">学习时长：</span>
                <span class="mobile-modal__detail-value">120小时</span>
            </div>
        `;
        document.getElementById('mobileModalBody').classList.add('details');

        document.getElementById('mobileModalFooter').innerHTML = `
            <button class="btn btn-primary" style="flex: 1;" onclick="closeMobileModal()">确定</button>
        `;

        document.getElementById('mobileModal').classList.add('active');
    }

    // 显示修改密码弹窗
    function showChangePasswordModal() {
        document.getElementById('mobileModalTitle').textContent = '修改密码';
        document.getElementById('mobileModalSubtitle').textContent = '请输入新旧密码';
        document.getElementById('mobileModalBody').innerHTML = `
            <div style="text-align: center; color: var(--text-secondary);">
                修改密码功能正在开发中，敬请期待！
            </div>
        `;
        document.getElementById('mobileModalBody').classList.remove('details');

        document.getElementById('mobileModalFooter').innerHTML = `
            <button class="btn btn-primary" style="flex: 1;" onclick="closeMobileModal()">确定</button>
        `;

        document.getElementById('mobileModal').classList.add('active');
    }

    // 显示绑定手机号弹窗
    function showBindPhoneModal() {
        document.getElementById('mobileModalTitle').textContent = '绑定手机号';
        document.getElementById('mobileModalSubtitle').textContent = '绑定手机号功能';
        document.getElementById('mobileModalBody').innerHTML = `
            <div style="text-align: center; color: var(--text-secondary);">
                绑定手机号功能正在开发中，敬请期待！
            </div>
        `;
        document.getElementById('mobileModalBody').classList.remove('details');

        document.getElementById('mobileModalFooter').innerHTML = `
            <button class="btn btn-primary" style="flex: 1;" onclick="closeMobileModal()">确定</button>
        `;

        document.getElementById('mobileModal').classList.add('active');
    }

    // 显示退出登录弹窗
    function showLogoutModal() {
        document.getElementById('mobileModalTitle').textContent = '退出登录';
        document.getElementById('mobileModalSubtitle').textContent = '确认要退出登录吗？';
        document.getElementById('mobileModalBody').innerHTML = `
            <div style="text-align: center; color: var(--text-secondary);">
                退出后将返回登录页面，请确认是否继续。
            </div>
        `;
        document.getElementById('mobileModalBody').classList.remove('details');

        document.getElementById('mobileModalFooter').innerHTML = `
            <button class="btn btn-text" onclick="closeMobileModal()">取消</button>
            <button class="btn btn-primary" onclick="confirmLogout()">确认退出</button>
        `;

        document.getElementById('mobileModal').classList.add('active');
    }

// 确认退出登录
    function confirmLogout() {
        closeMobileModal();
        showNotification('退出成功', '您已成功退出登录，正在返回登录页面...', 'success');

        // 延迟1.5秒后跳转到登录页面
        setTimeout(() => {
            // 跳转到登录页面
            window.location.href = '移动用户端-登录.html';
        }, 1500);
    }

    // -------------------------- 设置模块逻辑 --------------------------
    const switches = document.querySelectorAll('.switch');
    switches.forEach(switchEl => {
        switchEl.addEventListener('click', () => {
            switchEl.classList.toggle('active');
            const switchId = switchEl.id;
            const isActive = switchEl.classList.contains('active');

            // 设置中文开关名称映射
            const switchNameMap = {
                'autoRestSwitch': '自动开始休息',
                'reserveReminderSwitch': '预约提醒',
                'pomodoroReminderSwitch': '番茄钟结束提醒',
                'announcementSwitch': '系统公告通知'
            };

            const switchName = switchNameMap[switchId] || '设置项';
            showNotification('设置更新', `${switchName}已${isActive ? '开启' : '关闭'}`, 'info');
        });
    });

    // -------------------------- 弹窗和通知系统 --------------------------
    let currentModalCallback = null;

    // 显示手机风格弹窗（通用函数，现在只用于简单弹窗）
    function showMobileModal(title, subtitle, type = 'info', message = '', showConfirm = true) {
        document.getElementById('mobileModalTitle').textContent = title;
        document.getElementById('mobileModalSubtitle').textContent = subtitle;

        if (message) {
            document.getElementById('mobileModalBody').textContent = message;
            document.getElementById('mobileModalBody').classList.remove('details');
        }

        if (!showConfirm) {
            document.getElementById('mobileModalFooter').innerHTML = `
                <button class="btn btn-primary" style="flex: 1;" onclick="closeMobileModal()">确定</button>
            `;
        }

        document.getElementById('mobileModal').classList.add('active');
    }

    // 关闭手机风格弹窗
    function closeMobileModal() {
        document.getElementById('mobileModal').classList.remove('active');
        if (currentModalCallback) {
            currentModalCallback(false);
            currentModalCallback = null;
        }
    }

    // 确认手机风格弹窗
    function confirmMobileModal() {
        document.getElementById('mobileModal').classList.remove('active');
        if (currentModalCallback) {
            currentModalCallback(true);
            currentModalCallback = null;
        }
    }

    // 显示手机风格通知
    function showNotification(title, message, type = 'info') {
        const notification = document.getElementById('mobileNotification');
        const icon = document.getElementById('notificationIcon');
        const titleEl = document.getElementById('notificationTitle');
        const messageEl = document.getElementById('notificationMessage');

        // 设置图标和颜色
        icon.className = 'mobile-notification__icon';
        if (type === 'success') {
            icon.classList.add('mobile-notification__icon--success');
            icon.innerHTML = '<i class="fas fa-check-circle"></i>';
        } else if (type === 'error') {
            icon.classList.add('mobile-notification__icon--error');
            icon.innerHTML = '<i class="fas fa-exclamation-circle"></i>';
        } else {
            icon.classList.add('mobile-notification__icon--info');
            icon.innerHTML = '<i class="fas fa-info-circle"></i>';
        }

        // 设置标题和消息
        titleEl.textContent = title;
        messageEl.textContent = message;

        // 显示通知
        notification.classList.add('active');

        // 3秒后自动关闭
        setTimeout(() => {
            closeNotification();
        }, 3000);
    }

    // 关闭通知
    function closeNotification() {
        document.getElementById('mobileNotification').classList.remove('active');
    }

    // -------------------------- 初始化 --------------------------
    // 初始化页面
    document.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(window.location.search);
        const hashModule = window.location.hash.replace('#', '');
        const moduleKey = (params.get('module') || hashModule || 'pomodoro').toLowerCase();
        const moduleMap = {
            'pomodoro': 'modulePomodoro',
            'reserve': 'moduleReserve',
            'task': 'moduleTask',
            'calendar': 'moduleCalendar',
            'settings': 'moduleSettings'
        };
        const initialModule = moduleMap[moduleKey] || 'modulePomodoro';

        switchModule(initialModule);
        topBack.style.display = 'none';
        topAvatar.style.display = 'flex';
        bottomNav.style.display = 'flex';

        // 初始化番茄钟显示
        updatePomodoroDisplay();

        // 点击弹窗外部关闭弹窗
        document.getElementById('mobileModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('mobileModal')) {
                closeMobileModal();
            }
        });

        // 点击通知外部关闭通知
        document.getElementById('mobileNotification').addEventListener('click', (e) => {
            if (e.target === document.getElementById('mobileNotification')) {
                closeNotification();
            }
        });
    });
</script>
</body>
</html>